var Zepto=function(){function a(a){return null==a?String(a):U[V.call(a)]||"object"}function b(b){return"function"==a(b)}function c(a){return null!=a&&a==a.window}function d(a){return null!=a&&a.nodeType==a.DOCUMENT_NODE}function e(b){return"object"==a(b)}function f(a){return e(a)&&!c(a)&&Object.getPrototypeOf(a)==Object.prototype}function g(a){return"number"==typeof a.length}function h(a){return D.call(a,function(a){return null!=a})}function i(a){return a.length>0?x.fn.concat.apply([],a):a}function j(a){return a.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function k(a){return a in G?G[a]:G[a]=new RegExp("(^|\\s)"+a+"(\\s|$)")}function l(a,b){return"number"!=typeof b||H[j(a)]?b:b+"px"}function m(a){var b,c;return F[a]||(b=E.createElement(a),E.body.appendChild(b),c=getComputedStyle(b,"").getPropertyValue("display"),b.parentNode.removeChild(b),"none"==c&&(c="block"),F[a]=c),F[a]}function n(a){return"children"in a?C.call(a.children):x.map(a.childNodes,function(a){return 1==a.nodeType?a:void 0})}function o(a,b,c){for(w in b)c&&(f(b[w])||Z(b[w]))?(f(b[w])&&!f(a[w])&&(a[w]={}),Z(b[w])&&!Z(a[w])&&(a[w]=[]),o(a[w],b[w],c)):b[w]!==v&&(a[w]=b[w])}function p(a,b){return null==b?x(a):x(a).filter(b)}function q(a,c,d,e){return b(c)?c.call(a,d,e):c}function r(a,b,c){null==c?a.removeAttribute(b):a.setAttribute(b,c)}function s(a,b){var c=a.className||"",d=c&&c.baseVal!==v;return b===v?d?c.baseVal:c:void(d?c.baseVal=b:a.className=b)}function t(a){try{return a?"true"==a||"false"!=a&&("null"==a?null:+a+""==a?+a:/^[\[\{]/.test(a)?x.parseJSON(a):a):a}catch(b){return a}}function u(a,b){b(a);for(var c=0,d=a.childNodes.length;d>c;c++)u(a.childNodes[c],b)}var v,w,x,y,z,A,B=[],C=B.slice,D=B.filter,E=window.document,F={},G={},H={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},I=/^\s*<(\w+|!)[^>]*>/,J=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,K=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,L=/^(?:body|html)$/i,M=/([A-Z])/g,N=["val","css","html","text","data","width","height","offset"],O=["after","prepend","before","append"],P=E.createElement("table"),Q=E.createElement("tr"),R={tr:E.createElement("tbody"),tbody:P,thead:P,tfoot:P,td:Q,th:Q,"*":E.createElement("div")},S=/complete|loaded|interactive/,T=/^[\w-]*$/,U={},V=U.toString,W={},X=E.createElement("div"),Y={tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},Z=Array.isArray||function(a){return a instanceof Array};return W.matches=function(a,b){if(!b||!a||1!==a.nodeType)return!1;var c=a.webkitMatchesSelector||a.mozMatchesSelector||a.oMatchesSelector||a.matchesSelector;if(c)return c.call(a,b);var d,e=a.parentNode,f=!e;return f&&(e=X).appendChild(a),d=~W.qsa(e,b).indexOf(a),f&&X.removeChild(a),d},z=function(a){return a.replace(/-+(.)?/g,function(a,b){return b?b.toUpperCase():""})},A=function(a){return D.call(a,function(b,c){return a.indexOf(b)==c})},W.fragment=function(a,b,c){var d,e,g;return J.test(a)&&(d=x(E.createElement(RegExp.$1))),d||(a.replace&&(a=a.replace(K,"<$1></$2>")),b===v&&(b=I.test(a)&&RegExp.$1),b in R||(b="*"),g=R[b],g.innerHTML=""+a,d=x.each(C.call(g.childNodes),function(){g.removeChild(this)})),f(c)&&(e=x(d),x.each(c,function(a,b){N.indexOf(a)>-1?e[a](b):e.attr(a,b)})),d},W.Z=function(a,b){return a=a||[],a.__proto__=x.fn,a.selector=b||"",a},W.isZ=function(a){return a instanceof W.Z},W.init=function(a,c){var d;if(!a)return W.Z();if("string"==typeof a)if(a=a.trim(),"<"==a[0]&&I.test(a))d=W.fragment(a,RegExp.$1,c),a=null;else{if(c!==v)return x(c).find(a);d=W.qsa(E,a)}else{if(b(a))return x(E).ready(a);if(W.isZ(a))return a;if(Z(a))d=h(a);else if(e(a))d=[a],a=null;else if(I.test(a))d=W.fragment(a.trim(),RegExp.$1,c),a=null;else{if(c!==v)return x(c).find(a);d=W.qsa(E,a)}}return W.Z(d,a)},x=function(a,b){return W.init(a,b)},x.extend=function(a){var b,c=C.call(arguments,1);return"boolean"==typeof a&&(b=a,a=c.shift()),c.forEach(function(c){o(a,c,b)}),a},W.qsa=function(a,b){var c,e="#"==b[0],f=!e&&"."==b[0],g=e||f?b.slice(1):b,h=T.test(g);return d(a)&&h&&e?(c=a.getElementById(g))?[c]:[]:1!==a.nodeType&&9!==a.nodeType?[]:C.call(h&&!e?f?a.getElementsByClassName(g):a.getElementsByTagName(b):a.querySelectorAll(b))},x.contains=E.documentElement.contains?function(a,b){return a!==b&&a.contains(b)}:function(a,b){for(;b&&(b=b.parentNode);)if(b===a)return!0;return!1},x.type=a,x.isFunction=b,x.isWindow=c,x.isArray=Z,x.isPlainObject=f,x.isEmptyObject=function(a){var b;for(b in a)return!1;return!0},x.inArray=function(a,b,c){return B.indexOf.call(b,a,c)},x.camelCase=z,x.trim=function(a){return null==a?"":String.prototype.trim.call(a)},x.uuid=0,x.support={},x.expr={},x.map=function(a,b){var c,d,e,f=[];if(g(a))for(d=0;d<a.length;d++)c=b(a[d],d),null!=c&&f.push(c);else for(e in a)c=b(a[e],e),null!=c&&f.push(c);return i(f)},x.each=function(a,b){var c,d;if(g(a)){for(c=0;c<a.length;c++)if(b.call(a[c],c,a[c])===!1)return a}else for(d in a)if(b.call(a[d],d,a[d])===!1)return a;return a},x.grep=function(a,b){return D.call(a,b)},window.JSON&&(x.parseJSON=JSON.parse),x.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(a,b){U["[object "+b+"]"]=b.toLowerCase()}),x.fn={forEach:B.forEach,reduce:B.reduce,push:B.push,sort:B.sort,indexOf:B.indexOf,concat:B.concat,map:function(a){return x(x.map(this,function(b,c){return a.call(b,c,b)}))},slice:function(){return x(C.apply(this,arguments))},ready:function(a){return S.test(E.readyState)&&E.body?a(x):E.addEventListener("DOMContentLoaded",function(){a(x)},!1),this},get:function(a){return a===v?C.call(this):this[a>=0?a:a+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){null!=this.parentNode&&this.parentNode.removeChild(this)})},each:function(a){return B.every.call(this,function(b,c){return a.call(b,c,b)!==!1}),this},filter:function(a){return b(a)?this.not(this.not(a)):x(D.call(this,function(b){return W.matches(b,a)}))},add:function(a,b){return x(A(this.concat(x(a,b))))},is:function(a){return this.length>0&&W.matches(this[0],a)},not:function(a){var c=[];if(b(a)&&a.call!==v)this.each(function(b){a.call(this,b)||c.push(this)});else{var d="string"==typeof a?this.filter(a):g(a)&&b(a.item)?C.call(a):x(a);this.forEach(function(a){d.indexOf(a)<0&&c.push(a)})}return x(c)},has:function(a){return this.filter(function(){return e(a)?x.contains(this,a):x(this).find(a).size()})},eq:function(a){return-1===a?this.slice(a):this.slice(a,+a+1)},first:function(){var a=this[0];return a&&!e(a)?a:x(a)},last:function(){var a=this[this.length-1];return a&&!e(a)?a:x(a)},find:function(a){var b,c=this;return b=a?"object"==typeof a?x(a).filter(function(){var a=this;return B.some.call(c,function(b){return x.contains(b,a)})}):1==this.length?x(W.qsa(this[0],a)):this.map(function(){return W.qsa(this,a)}):x()},closest:function(a,b){var c=this[0],e=!1;for("object"==typeof a&&(e=x(a));c&&!(e?e.indexOf(c)>=0:W.matches(c,a));)c=c!==b&&!d(c)&&c.parentNode;return x(c)},parents:function(a){for(var b=[],c=this;c.length>0;)c=x.map(c,function(a){return(a=a.parentNode)&&!d(a)&&b.indexOf(a)<0?(b.push(a),a):void 0});return p(b,a)},parent:function(a){return p(A(this.pluck("parentNode")),a)},children:function(a){return p(this.map(function(){return n(this)}),a)},contents:function(){return this.map(function(){return C.call(this.childNodes)})},siblings:function(a){return p(this.map(function(a,b){return D.call(n(b.parentNode),function(a){return a!==b})}),a)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(a){return x.map(this,function(b){return b[a]})},show:function(){return this.each(function(){"none"==this.style.display&&(this.style.display=""),"none"==getComputedStyle(this,"").getPropertyValue("display")&&(this.style.display=m(this.nodeName))})},replaceWith:function(a){return this.before(a).remove()},wrap:function(a){var c=b(a);if(this[0]&&!c)var d=x(a).get(0),e=d.parentNode||this.length>1;return this.each(function(b){x(this).wrapAll(c?a.call(this,b):e?d.cloneNode(!0):d)})},wrapAll:function(a){if(this[0]){x(this[0]).before(a=x(a));for(var b;(b=a.children()).length;)a=b.first();x(a).append(this)}return this},wrapInner:function(a){var c=b(a);return this.each(function(b){var d=x(this),e=d.contents(),f=c?a.call(this,b):a;e.length?e.wrapAll(f):d.append(f)})},unwrap:function(){return this.parent().each(function(){x(this).replaceWith(x(this).children())}),this},clone:function(){return this.map(function(){return this.cloneNode(!0)})},hide:function(){return this.css("display","none")},toggle:function(a){return this.each(function(){var b=x(this);(a===v?"none"==b.css("display"):a)?b.show():b.hide()})},prev:function(a){return x(this.pluck("previousElementSibling")).filter(a||"*")},next:function(a){return x(this.pluck("nextElementSibling")).filter(a||"*")},html:function(a){return 0 in arguments?this.each(function(b){var c=this.innerHTML;x(this).empty().append(q(this,a,b,c))}):0 in this?this[0].innerHTML:null},text:function(a){return 0 in arguments?this.each(function(b){var c=q(this,a,b,this.textContent);this.textContent=null==c?"":""+c}):0 in this?this[0].textContent:null},attr:function(a,b){var c;return"string"!=typeof a||1 in arguments?this.each(function(c){if(1===this.nodeType)if(e(a))for(w in a)r(this,w,a[w]);else r(this,a,q(this,b,c,this.getAttribute(a)))}):this.length&&1===this[0].nodeType?!(c=this[0].getAttribute(a))&&a in this[0]?this[0][a]:c:v},removeAttr:function(a){return this.each(function(){1===this.nodeType&&a.split(" ").forEach(function(a){r(this,a)},this)})},prop:function(a,b){return a=Y[a]||a,1 in arguments?this.each(function(c){this[a]=q(this,b,c,this[a])}):this[0]&&this[0][a]},data:function(a,b){var c="data-"+a.replace(M,"-$1").toLowerCase(),d=1 in arguments?this.attr(c,b):this.attr(c);return null!==d?t(d):v},val:function(a){return 0 in arguments?this.each(function(b){this.value=q(this,a,b,this.value)}):this[0]&&(this[0].multiple?x(this[0]).find("option").filter(function(){return this.selected}).pluck("value"):this[0].value)},offset:function(a){if(a)return this.each(function(b){var c=x(this),d=q(this,a,b,c.offset()),e=c.offsetParent().offset(),f={top:d.top-e.top,left:d.left-e.left};"static"==c.css("position")&&(f.position="relative"),c.css(f)});if(!this.length)return null;var b=this[0].getBoundingClientRect();return{left:b.left+window.pageXOffset,top:b.top+window.pageYOffset,width:Math.round(b.width),height:Math.round(b.height)}},css:function(b,c){if(arguments.length<2){var d,e=this[0];if(!e)return;if(d=getComputedStyle(e,""),"string"==typeof b)return e.style[z(b)]||d.getPropertyValue(b);if(Z(b)){var f={};return x.each(b,function(a,b){f[b]=e.style[z(b)]||d.getPropertyValue(b)}),f}}var g="";if("string"==a(b))c||0===c?g=j(b)+":"+l(b,c):this.each(function(){this.style.removeProperty(j(b))});else for(w in b)b[w]||0===b[w]?g+=j(w)+":"+l(w,b[w])+";":this.each(function(){this.style.removeProperty(j(w))});return this.each(function(){this.style.cssText+=";"+g})},index:function(a){return a?this.indexOf(x(a)[0]):this.parent().children().indexOf(this[0])},hasClass:function(a){return!!a&&B.some.call(this,function(a){return this.test(s(a))},k(a))},addClass:function(a){return a?this.each(function(b){if("className"in this){y=[];var c=s(this),d=q(this,a,b,c);d.split(/\s+/g).forEach(function(a){x(this).hasClass(a)||y.push(a)},this),y.length&&s(this,c+(c?" ":"")+y.join(" "))}}):this},removeClass:function(a){return this.each(function(b){if("className"in this){if(a===v)return s(this,"");y=s(this),q(this,a,b,y).split(/\s+/g).forEach(function(a){y=y.replace(k(a)," ")}),s(this,y.trim())}})},toggleClass:function(a,b){return a?this.each(function(c){var d=x(this),e=q(this,a,c,s(this));e.split(/\s+/g).forEach(function(a){(b===v?!d.hasClass(a):b)?d.addClass(a):d.removeClass(a)})}):this},scrollTop:function(a){if(this.length){var b="scrollTop"in this[0];return a===v?b?this[0].scrollTop:this[0].pageYOffset:this.each(b?function(){this.scrollTop=a}:function(){this.scrollTo(this.scrollX,a)})}},scrollLeft:function(a){if(this.length){var b="scrollLeft"in this[0];return a===v?b?this[0].scrollLeft:this[0].pageXOffset:this.each(b?function(){this.scrollLeft=a}:function(){this.scrollTo(a,this.scrollY)})}},position:function(){if(this.length){var a=this[0],b=this.offsetParent(),c=this.offset(),d=L.test(b[0].nodeName)?{top:0,left:0}:b.offset();return c.top-=parseFloat(x(a).css("margin-top"))||0,c.left-=parseFloat(x(a).css("margin-left"))||0,d.top+=parseFloat(x(b[0]).css("border-top-width"))||0,d.left+=parseFloat(x(b[0]).css("border-left-width"))||0,{top:c.top-d.top,left:c.left-d.left}}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent||E.body;a&&!L.test(a.nodeName)&&"static"==x(a).css("position");)a=a.offsetParent;return a})}},x.fn.detach=x.fn.remove,["width","height"].forEach(function(a){var b=a.replace(/./,function(a){return a[0].toUpperCase()});x.fn[a]=function(e){var f,g=this[0];return e===v?c(g)?g["inner"+b]:d(g)?g.documentElement["scroll"+b]:(f=this.offset())&&f[a]:this.each(function(b){g=x(this),g.css(a,q(this,e,b,g[a]()))})}}),O.forEach(function(b,c){var d=c%2;x.fn[b]=function(){var b,e,f=x.map(arguments,function(c){return b=a(c),"object"==b||"array"==b||null==c?c:W.fragment(c)}),g=this.length>1;return f.length<1?this:this.each(function(a,b){e=d?b:b.parentNode,b=0==c?b.nextSibling:1==c?b.firstChild:2==c?b:null;var h=x.contains(E.documentElement,e);f.forEach(function(a){if(g)a=a.cloneNode(!0);else if(!e)return x(a).remove();e.insertBefore(a,b),h&&u(a,function(a){null==a.nodeName||"SCRIPT"!==a.nodeName.toUpperCase()||a.type&&"text/javascript"!==a.type||a.src||window.eval.call(window,a.innerHTML)})})})},x.fn[d?b+"To":"insert"+(c?"Before":"After")]=function(a){return x(a)[b](this),this}}),W.Z.prototype=x.fn,W.uniq=A,W.deserializeValue=t,x.zepto=W,x}();window.Zepto=Zepto,void 0===window.$&&(window.$=Zepto),function(a){function b(a){return a._zid||(a._zid=m++)}function c(a,c,f,g){if(c=d(c),c.ns)var h=e(c.ns);return(q[b(a)]||[]).filter(function(a){return!(!a||c.e&&a.e!=c.e||c.ns&&!h.test(a.ns)||f&&b(a.fn)!==b(f)||g&&a.sel!=g)})}function d(a){var b=(""+a).split(".");return{e:b[0],ns:b.slice(1).sort().join(" ")}}function e(a){return new RegExp("(?:^| )"+a.replace(" "," .* ?")+"(?: |$)")}function f(a,b){return a.del&&!s&&a.e in t||!!b}function g(a){return u[a]||s&&t[a]||a}function h(c,e,h,i,k,m,n){var o=b(c),p=q[o]||(q[o]=[]);e.split(/\s/).forEach(function(b){if("ready"==b)return a(document).ready(h);var e=d(b);e.fn=h,e.sel=k,e.e in u&&(h=function(b){var c=b.relatedTarget;return!c||c!==this&&!a.contains(this,c)?e.fn.apply(this,arguments):void 0}),e.del=m;var o=m||h;e.proxy=function(a){if(a=j(a),!a.isImmediatePropagationStopped()){a.data=i;var b=o.apply(c,a._args==l?[a]:[a].concat(a._args));return b===!1&&(a.preventDefault(),a.stopPropagation()),b}},e.i=p.length,p.push(e),"addEventListener"in c&&c.addEventListener(g(e.e),e.proxy,f(e,n))})}function i(a,d,e,h,i){var j=b(a);(d||"").split(/\s/).forEach(function(b){c(a,b,e,h).forEach(function(b){delete q[j][b.i],"removeEventListener"in a&&a.removeEventListener(g(b.e),b.proxy,f(b,i))})})}function j(b,c){return(c||!b.isDefaultPrevented)&&(c||(c=b),a.each(y,function(a,d){var e=c[a];b[a]=function(){return this[d]=v,e&&e.apply(c,arguments)},b[d]=w}),(c.defaultPrevented!==l?c.defaultPrevented:"returnValue"in c?c.returnValue===!1:c.getPreventDefault&&c.getPreventDefault())&&(b.isDefaultPrevented=v)),b}function k(a){var b,c={originalEvent:a};for(b in a)x.test(b)||a[b]===l||(c[b]=a[b]);return j(c,a)}var l,m=1,n=Array.prototype.slice,o=a.isFunction,p=function(a){return"string"==typeof a},q={},r={},s="onfocusin"in window,t={focus:"focusin",blur:"focusout"},u={mouseenter:"mouseover",mouseleave:"mouseout"};r.click=r.mousedown=r.mouseup=r.mousemove="MouseEvents",a.event={add:h,remove:i},a.proxy=function(c,d){var e=2 in arguments&&n.call(arguments,2);if(o(c)){var f=function(){return c.apply(d,e?e.concat(n.call(arguments)):arguments)};return f._zid=b(c),f}if(p(d))return e?(e.unshift(c[d],c),a.proxy.apply(null,e)):a.proxy(c[d],c);throw new TypeError("expected function")},a.fn.bind=function(a,b,c){return this.on(a,b,c)},a.fn.unbind=function(a,b){return this.off(a,b)},a.fn.one=function(a,b,c,d){return this.on(a,b,c,d,1)};var v=function(){return!0},w=function(){return!1},x=/^([A-Z]|returnValue$|layer[XY]$)/,y={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};a.fn.delegate=function(a,b,c){return this.on(b,a,c)},a.fn.undelegate=function(a,b,c){return this.off(b,a,c)},a.fn.live=function(b,c){return a(document.body).delegate(this.selector,b,c),this},a.fn.die=function(b,c){return a(document.body).undelegate(this.selector,b,c),this},a.fn.on=function(b,c,d,e,f){var g,j,m=this;return b&&!p(b)?(a.each(b,function(a,b){m.on(a,c,d,b,f)}),m):(p(c)||o(e)||e===!1||(e=d,d=c,c=l),(o(d)||d===!1)&&(e=d,d=l),e===!1&&(e=w),m.each(function(l,m){f&&(g=function(a){return i(m,a.type,e),e.apply(this,arguments)}),c&&(j=function(b){var d,f=a(b.target).closest(c,m).get(0);return f&&f!==m?(d=a.extend(k(b),{currentTarget:f,liveFired:m}),(g||e).apply(f,[d].concat(n.call(arguments,1)))):void 0}),h(m,b,e,d,c,j||g)}))},a.fn.off=function(b,c,d){var e=this;return b&&!p(b)?(a.each(b,function(a,b){e.off(a,c,b)}),e):(p(c)||o(d)||d===!1||(d=c,c=l),d===!1&&(d=w),e.each(function(){i(this,b,d,c)}))},a.fn.trigger=function(b,c){return b=p(b)||a.isPlainObject(b)?a.Event(b):j(b),b._args=c,this.each(function(){b.type in t&&"function"==typeof this[b.type]?this[b.type]():"dispatchEvent"in this?this.dispatchEvent(b):a(this).triggerHandler(b,c)})},a.fn.triggerHandler=function(b,d){var e,f;return this.each(function(g,h){e=k(p(b)?a.Event(b):b),e._args=d,e.target=h,a.each(c(h,b.type||b),function(a,b){return f=b.proxy(e),!e.isImmediatePropagationStopped()&&void 0})}),f},"focusin focusout focus blur load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach(function(b){a.fn[b]=function(a){return 0 in arguments?this.bind(b,a):this.trigger(b)}}),a.Event=function(a,b){p(a)||(b=a,a=b.type);var c=document.createEvent(r[a]||"Events"),d=!0;if(b)for(var e in b)"bubbles"==e?d=!!b[e]:c[e]=b[e];return c.initEvent(a,d,!0),j(c)}}(Zepto),function(a){function b(b,c,d){var e=a.Event(c);return a(b).trigger(e,d),!e.isDefaultPrevented()}function c(a,c,d,e){return a.global?b(c||s,d,e):void 0}function d(b){b.global&&0===a.active++&&c(b,null,"ajaxStart")}function e(b){b.global&&!--a.active&&c(b,null,"ajaxStop")}function f(a,b){var d=b.context;return b.beforeSend.call(d,a,b)!==!1&&c(b,d,"ajaxBeforeSend",[a,b])!==!1&&void c(b,d,"ajaxSend",[a,b])}function g(a,b,d,e){var f=d.context,g="success";d.success.call(f,a,g,b),e&&e.resolveWith(f,[a,g,b]),c(d,f,"ajaxSuccess",[b,d,a]),i(g,b,d)}function h(a,b,d,e,f){var g=e.context;e.error.call(g,d,b,a),f&&f.rejectWith(g,[d,b,a]),c(e,g,"ajaxError",[d,e,a||b]),i(b,d,e)}function i(a,b,d){var f=d.context;d.complete.call(f,b,a),c(d,f,"ajaxComplete",[b,d]),e(d)}function j(){}function k(a){return a&&(a=a.split(";",2)[0]),a&&(a==x?"html":a==w?"json":u.test(a)?"script":v.test(a)&&"xml")||"text"}function l(a,b){return""==b?a:(a+"&"+b).replace(/[&?]{1,2}/,"?")}function m(b){b.processData&&b.data&&"string"!=a.type(b.data)&&(b.data=a.param(b.data,b.traditional)),!b.data||b.type&&"GET"!=b.type.toUpperCase()||(b.url=l(b.url,b.data),b.data=void 0)}function n(b,c,d,e){return a.isFunction(c)&&(e=d,d=c,c=void 0),a.isFunction(d)||(e=d,d=void 0),{url:b,data:c,success:d,dataType:e}}function o(b,c,d,e){var f,g=a.isArray(c),h=a.isPlainObject(c);a.each(c,function(c,i){f=a.type(i),e&&(c=d?e:e+"["+(h||"object"==f||"array"==f?c:"")+"]"),!e&&g?b.add(i.name,i.value):"array"==f||!d&&"object"==f?o(b,i,d,c):b.add(c,i)})}var p,q,r=0,s=window.document,t=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,u=/^(?:text|application)\/javascript/i,v=/^(?:text|application)\/xml/i,w="application/json",x="text/html",y=/^\s*$/,z=s.createElement("a");z.href=window.location.href,a.active=0,a.ajaxJSONP=function(b,c){if(!("type"in b))return a.ajax(b);var d,e,i=b.jsonpCallback,j=(a.isFunction(i)?i():i)||"jsonp"+ ++r,k=s.createElement("script"),l=window[j],m=function(b){a(k).triggerHandler("error",b||"abort")},n={abort:m};return c&&c.promise(n),a(k).on("load error",function(f,i){clearTimeout(e),a(k).off().remove(),"error"!=f.type&&d?g(d[0],n,b,c):h(null,i||"error",n,b,c),window[j]=l,d&&a.isFunction(l)&&l(d[0]),l=d=void 0}),f(n,b)===!1?(m("abort"),n):(window[j]=function(){d=arguments},k.src=b.url.replace(/\?(.+)=\?/,"?$1="+j),s.head.appendChild(k),b.timeout>0&&(e=setTimeout(function(){m("timeout")},b.timeout)),n)},a.ajaxSettings={type:"GET",beforeSend:j,success:j,error:j,complete:j,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript, application/x-javascript",json:w,xml:"application/xml, text/xml",html:x,text:"text/plain"},crossDomain:!1,timeout:0,processData:!0,cache:!0},a.ajax=function(b){var c,e=a.extend({},b||{}),i=a.Deferred&&a.Deferred();for(p in a.ajaxSettings)void 0===e[p]&&(e[p]=a.ajaxSettings[p]);d(e),e.crossDomain||(c=s.createElement("a"),c.href=e.url,c.href=c.href,e.crossDomain=z.protocol+"//"+z.host!=c.protocol+"//"+c.host),e.url||(e.url=window.location.toString()),m(e);var n=e.dataType,o=/\?.+=\?/.test(e.url);if(o&&(n="jsonp"),e.cache!==!1&&(b&&b.cache===!0||"script"!=n&&"jsonp"!=n)||(e.url=l(e.url,"_="+Date.now())),"jsonp"==n)return o||(e.url=l(e.url,e.jsonp?e.jsonp+"=?":e.jsonp===!1?"":"callback=?")),a.ajaxJSONP(e,i);var r,t=e.accepts[n],u={},v=function(a,b){u[a.toLowerCase()]=[a,b]},w=/^([\w-]+:)\/\//.test(e.url)?RegExp.$1:window.location.protocol,x=e.xhr(),A=x.setRequestHeader;if(i&&i.promise(x),e.crossDomain||v("X-Requested-With","XMLHttpRequest"),v("Accept",t||"*/*"),(t=e.mimeType||t)&&(t.indexOf(",")>-1&&(t=t.split(",",2)[0]),x.overrideMimeType&&x.overrideMimeType(t)),(e.contentType||e.contentType!==!1&&e.data&&"GET"!=e.type.toUpperCase())&&v("Content-Type",e.contentType||"application/x-www-form-urlencoded"),e.headers)for(q in e.headers)v(q,e.headers[q]);if(x.setRequestHeader=v,x.onreadystatechange=function(){if(4==x.readyState){x.onreadystatechange=j,clearTimeout(r);var b,c=!1;if(x.status>=200&&x.status<300||304==x.status||0==x.status&&"file:"==w){n=n||k(e.mimeType||x.getResponseHeader("content-type")),b=x.responseText;try{"script"==n?(0,eval)(b):"xml"==n?b=x.responseXML:"json"==n&&(b=y.test(b)?null:a.parseJSON(b))}catch(d){c=d}c?h(c,"parsererror",x,e,i):g(b,x,e,i)}else h(x.statusText||null,x.status?"error":"abort",x,e,i)}},f(x,e)===!1)return x.abort(),h(null,"abort",x,e,i),x;if(e.xhrFields)for(q in e.xhrFields)x[q]=e.xhrFields[q];var B=!("async"in e)||e.async;x.open(e.type,e.url,B,e.username,e.password);for(q in u)A.apply(x,u[q]);return e.timeout>0&&(r=setTimeout(function(){x.onreadystatechange=j,x.abort(),h(null,"timeout",x,e,i)},e.timeout)),x.send(e.data?e.data:null),x},a.get=function(){return a.ajax(n.apply(null,arguments))},a.post=function(){var b=n.apply(null,arguments);return b.type="POST",a.ajax(b)},a.getJSON=function(){var b=n.apply(null,arguments);return b.dataType="json",a.ajax(b)},a.fn.load=function(b,c,d){if(!this.length)return this;var e,f=this,g=b.split(/\s/),h=n(b,c,d),i=h.success;return g.length>1&&(h.url=g[0],e=g[1]),h.success=function(b){f.html(e?a("<div>").html(b.replace(t,"")).find(e):b),i&&i.apply(f,arguments)},a.ajax(h),this};var A=encodeURIComponent;a.param=function(b,c){var d=[];return d.add=function(b,c){a.isFunction(c)&&(c=c()),null==c&&(c=""),this.push(A(b)+"="+A(c))},o(d,b,c),d.join("&").replace(/%20/g,"+")}}(Zepto),function(a){a.fn.serializeArray=function(){var b,c,d=[],e=function(a){return a.forEach?a.forEach(e):void d.push({name:b,value:a})};return this[0]&&a.each(this[0].elements,function(d,f){c=f.type,b=f.name,b&&"fieldset"!=f.nodeName.toLowerCase()&&!f.disabled&&"submit"!=c&&"reset"!=c&&"button"!=c&&"file"!=c&&("radio"!=c&&"checkbox"!=c||f.checked)&&e(a(f).val())}),d},a.fn.serialize=function(){var a=[];return this.serializeArray().forEach(function(b){a.push(encodeURIComponent(b.name)+"="+encodeURIComponent(b.value))}),a.join("&")},a.fn.submit=function(b){if(0 in arguments)this.bind("submit",b);else if(this.length){var c=a.Event("submit");this.eq(0).trigger(c),c.isDefaultPrevented()||this.get(0).submit()}return this}}(Zepto),function(a){"__proto__"in{}||a.extend(a.zepto,{Z:function(b,c){return b=b||[],a.extend(b,a.fn),b.selector=c||"",b.__Z=!0,b},isZ:function(b){return"array"===a.type(b)&&"__Z"in b}});try{getComputedStyle(void 0)}catch(b){var c=getComputedStyle;window.getComputedStyle=function(a){try{return c(a)}catch(b){return null}}}}(Zepto),function(){function a(a){function b(b,c,d,e,f,g){for(;f>=0&&f<g;f+=a){var h=e?e[f]:f;d=c(d,b[h],h,b)}return d}return function(c,d,e,f){d=t(d,f,4);var g=!A(c)&&s.keys(c),h=(g||c).length,i=a>0?0:h-1;return arguments.length<3&&(e=c[g?g[i]:i],i+=a),b(c,d,e,g,i,h)}}function b(a){return function(b,c,d){c=u(c,d);for(var e=z(b),f=a>0?0:e-1;f>=0&&f<e;f+=a)if(c(b[f],f,b))return f;return-1}}function c(a,b,c){return function(d,e,f){var g=0,h=z(d);if("number"==typeof f)a>0?g=f>=0?f:Math.max(f+h,g):h=f>=0?Math.min(f+1,h):f+h+1;else if(c&&f&&h)return f=c(d,e),d[f]===e?f:-1;if(e!==e)return f=b(k.call(d,g,h),s.isNaN),f>=0?f+g:-1;for(f=a>0?g:h-1;f>=0&&f<h;f+=a)if(d[f]===e)return f;return-1}}function d(a,b){var c=F.length,d=a.constructor,e=s.isFunction(d)&&d.prototype||h,f="constructor";for(s.has(a,f)&&!s.contains(b,f)&&b.push(f);c--;)f=F[c],f in a&&a[f]!==e[f]&&!s.contains(b,f)&&b.push(f)}var e=this,f=e._,g=Array.prototype,h=Object.prototype,i=Function.prototype,j=g.push,k=g.slice,l=h.toString,m=h.hasOwnProperty,n=Array.isArray,o=Object.keys,p=i.bind,q=Object.create,r=function(){},s=function(a){return a instanceof s?a:this instanceof s?void(this._wrapped=a):new s(a)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=s),exports._=s):e._=s,s.VERSION="1.8.3";var t=function(a,b,c){if(void 0===b)return a;switch(null==c?3:c){case 1:return function(c){return a.call(b,c)};case 2:return function(c,d){return a.call(b,c,d)};case 3:return function(c,d,e){return a.call(b,c,d,e)};case 4:return function(c,d,e,f){return a.call(b,c,d,e,f)}}return function(){return a.apply(b,arguments)}},u=function(a,b,c){return null==a?s.identity:s.isFunction(a)?t(a,b,c):s.isObject(a)?s.matcher(a):s.property(a)};s.iteratee=function(a,b){return u(a,b,1/0)};var v=function(a,b){return function(c){var d=arguments.length;if(d<2||null==c)return c;for(var e=1;e<d;e++)for(var f=arguments[e],g=a(f),h=g.length,i=0;i<h;i++){var j=g[i];b&&void 0!==c[j]||(c[j]=f[j])}return c}},w=function(a){if(!s.isObject(a))return{};if(q)return q(a);r.prototype=a;var b=new r;return r.prototype=null,b},x=function(a){return function(b){return null==b?void 0:b[a]}},y=Math.pow(2,53)-1,z=x("length"),A=function(a){var b=z(a);return"number"==typeof b&&b>=0&&b<=y};s.each=s.forEach=function(a,b,c){b=t(b,c);var d,e;if(A(a))for(d=0,e=a.length;d<e;d++)b(a[d],d,a);else{var f=s.keys(a);for(d=0,e=f.length;d<e;d++)b(a[f[d]],f[d],a)}return a},s.map=s.collect=function(a,b,c){b=u(b,c);for(var d=!A(a)&&s.keys(a),e=(d||a).length,f=Array(e),g=0;g<e;g++){var h=d?d[g]:g;f[g]=b(a[h],h,a)}return f},s.reduce=s.foldl=s.inject=a(1),s.reduceRight=s.foldr=a(-1),s.find=s.detect=function(a,b,c){var d;if(d=A(a)?s.findIndex(a,b,c):s.findKey(a,b,c),void 0!==d&&d!==-1)return a[d]},s.filter=s.select=function(a,b,c){var d=[];return b=u(b,c),s.each(a,function(a,c,e){b(a,c,e)&&d.push(a)}),d},s.reject=function(a,b,c){return s.filter(a,s.negate(u(b)),c)},s.every=s.all=function(a,b,c){b=u(b,c);for(var d=!A(a)&&s.keys(a),e=(d||a).length,f=0;f<e;f++){var g=d?d[f]:f;if(!b(a[g],g,a))return!1}return!0},s.some=s.any=function(a,b,c){b=u(b,c);for(var d=!A(a)&&s.keys(a),e=(d||a).length,f=0;f<e;f++){var g=d?d[f]:f;if(b(a[g],g,a))return!0}return!1},s.contains=s.includes=s.include=function(a,b,c,d){return A(a)||(a=s.values(a)),("number"!=typeof c||d)&&(c=0),s.indexOf(a,b,c)>=0},s.invoke=function(a,b){var c=k.call(arguments,2),d=s.isFunction(b);return s.map(a,function(a){var e=d?b:a[b];return null==e?e:e.apply(a,c)})},s.pluck=function(a,b){return s.map(a,s.property(b))},s.where=function(a,b){return s.filter(a,s.matcher(b))},s.findWhere=function(a,b){return s.find(a,s.matcher(b))},s.max=function(a,b,c){var d,e,f=-(1/0),g=-(1/0);if(null==b&&null!=a){a=A(a)?a:s.values(a);for(var h=0,i=a.length;h<i;h++)d=a[h],d>f&&(f=d)}else b=u(b,c),s.each(a,function(a,c,d){e=b(a,c,d),(e>g||e===-(1/0)&&f===-(1/0))&&(f=a,g=e)});return f},s.min=function(a,b,c){var d,e,f=1/0,g=1/0;if(null==b&&null!=a){a=A(a)?a:s.values(a);for(var h=0,i=a.length;h<i;h++)d=a[h],d<f&&(f=d)}else b=u(b,c),s.each(a,function(a,c,d){e=b(a,c,d),(e<g||e===1/0&&f===1/0)&&(f=a,g=e)});return f},s.shuffle=function(a){for(var b,c=A(a)?a:s.values(a),d=c.length,e=Array(d),f=0;f<d;f++)b=s.random(0,f),b!==f&&(e[f]=e[b]),e[b]=c[f];return e},s.sample=function(a,b,c){return null==b||c?(A(a)||(a=s.values(a)),a[s.random(a.length-1)]):s.shuffle(a).slice(0,Math.max(0,b))},s.sortBy=function(a,b,c){return b=u(b,c),s.pluck(s.map(a,function(a,c,d){return{value:a,index:c,criteria:b(a,c,d)}}).sort(function(a,b){var c=a.criteria,d=b.criteria;if(c!==d){if(c>d||void 0===c)return 1;if(c<d||void 0===d)return-1}return a.index-b.index}),"value")};var B=function(a){return function(b,c,d){var e={};return c=u(c,d),s.each(b,function(d,f){var g=c(d,f,b);a(e,d,g)}),e}};s.groupBy=B(function(a,b,c){s.has(a,c)?a[c].push(b):a[c]=[b]}),s.indexBy=B(function(a,b,c){a[c]=b}),s.countBy=B(function(a,b,c){s.has(a,c)?a[c]++:a[c]=1}),s.toArray=function(a){return a?s.isArray(a)?k.call(a):A(a)?s.map(a,s.identity):s.values(a):[]},s.size=function(a){return null==a?0:A(a)?a.length:s.keys(a).length},s.partition=function(a,b,c){b=u(b,c);var d=[],e=[];return s.each(a,function(a,c,f){(b(a,c,f)?d:e).push(a)}),[d,e]},s.first=s.head=s.take=function(a,b,c){if(null!=a)return null==b||c?a[0]:s.initial(a,a.length-b)},s.initial=function(a,b,c){return k.call(a,0,Math.max(0,a.length-(null==b||c?1:b)))},s.last=function(a,b,c){if(null!=a)return null==b||c?a[a.length-1]:s.rest(a,Math.max(0,a.length-b))},s.rest=s.tail=s.drop=function(a,b,c){return k.call(a,null==b||c?1:b)},s.compact=function(a){return s.filter(a,s.identity)};var C=function(a,b,c,d){for(var e=[],f=0,g=d||0,h=z(a);g<h;g++){var i=a[g];if(A(i)&&(s.isArray(i)||s.isArguments(i))){b||(i=C(i,b,c));var j=0,k=i.length;for(e.length+=k;j<k;)e[f++]=i[j++]}else c||(e[f++]=i)}return e};s.flatten=function(a,b){return C(a,b,!1)},s.without=function(a){return s.difference(a,k.call(arguments,1))},s.uniq=s.unique=function(a,b,c,d){s.isBoolean(b)||(d=c,c=b,b=!1),null!=c&&(c=u(c,d));for(var e=[],f=[],g=0,h=z(a);g<h;g++){var i=a[g],j=c?c(i,g,a):i;b?(g&&f===j||e.push(i),f=j):c?s.contains(f,j)||(f.push(j),e.push(i)):s.contains(e,i)||e.push(i)}return e},s.union=function(){return s.uniq(C(arguments,!0,!0))},s.intersection=function(a){for(var b=[],c=arguments.length,d=0,e=z(a);d<e;d++){var f=a[d];if(!s.contains(b,f)){for(var g=1;g<c&&s.contains(arguments[g],f);g++);g===c&&b.push(f)}}return b},s.difference=function(a){var b=C(arguments,!0,!0,1);return s.filter(a,function(a){return!s.contains(b,a)})},s.zip=function(){return s.unzip(arguments)},s.unzip=function(a){for(var b=a&&s.max(a,z).length||0,c=Array(b),d=0;d<b;d++)c[d]=s.pluck(a,d);return c},s.object=function(a,b){for(var c={},d=0,e=z(a);d<e;d++)b?c[a[d]]=b[d]:c[a[d][0]]=a[d][1];return c},s.findIndex=b(1),s.findLastIndex=b(-1),s.sortedIndex=function(a,b,c,d){c=u(c,d,1);for(var e=c(b),f=0,g=z(a);f<g;){var h=Math.floor((f+g)/2);
c(a[h])<e?f=h+1:g=h}return f},s.indexOf=c(1,s.findIndex,s.sortedIndex),s.lastIndexOf=c(-1,s.findLastIndex),s.range=function(a,b,c){null==b&&(b=a||0,a=0),c=c||1;for(var d=Math.max(Math.ceil((b-a)/c),0),e=Array(d),f=0;f<d;f++,a+=c)e[f]=a;return e};var D=function(a,b,c,d,e){if(!(d instanceof b))return a.apply(c,e);var f=w(a.prototype),g=a.apply(f,e);return s.isObject(g)?g:f};s.bind=function(a,b){if(p&&a.bind===p)return p.apply(a,k.call(arguments,1));if(!s.isFunction(a))throw new TypeError("Bind must be called on a function");var c=k.call(arguments,2),d=function(){return D(a,d,b,this,c.concat(k.call(arguments)))};return d},s.partial=function(a){var b=k.call(arguments,1),c=function(){for(var d=0,e=b.length,f=Array(e),g=0;g<e;g++)f[g]=b[g]===s?arguments[d++]:b[g];for(;d<arguments.length;)f.push(arguments[d++]);return D(a,c,this,this,f)};return c},s.bindAll=function(a){var b,c,d=arguments.length;if(d<=1)throw new Error("bindAll must be passed function names");for(b=1;b<d;b++)c=arguments[b],a[c]=s.bind(a[c],a);return a},s.memoize=function(a,b){var c=function(d){var e=c.cache,f=""+(b?b.apply(this,arguments):d);return s.has(e,f)||(e[f]=a.apply(this,arguments)),e[f]};return c.cache={},c},s.delay=function(a,b){var c=k.call(arguments,2);return setTimeout(function(){return a.apply(null,c)},b)},s.defer=s.partial(s.delay,s,1),s.throttle=function(a,b,c){var d,e,f,g=null,h=0;c||(c={});var i=function(){h=c.leading===!1?0:s.now(),g=null,f=a.apply(d,e),g||(d=e=null)};return function(){var j=s.now();h||c.leading!==!1||(h=j);var k=b-(j-h);return d=this,e=arguments,k<=0||k>b?(g&&(clearTimeout(g),g=null),h=j,f=a.apply(d,e),g||(d=e=null)):g||c.trailing===!1||(g=setTimeout(i,k)),f}},s.debounce=function(a,b,c){var d,e,f,g,h,i=function(){var j=s.now()-g;j<b&&j>=0?d=setTimeout(i,b-j):(d=null,c||(h=a.apply(f,e),d||(f=e=null)))};return function(){f=this,e=arguments,g=s.now();var j=c&&!d;return d||(d=setTimeout(i,b)),j&&(h=a.apply(f,e),f=e=null),h}},s.wrap=function(a,b){return s.partial(b,a)},s.negate=function(a){return function(){return!a.apply(this,arguments)}},s.compose=function(){var a=arguments,b=a.length-1;return function(){for(var c=b,d=a[b].apply(this,arguments);c--;)d=a[c].call(this,d);return d}},s.after=function(a,b){return function(){if(--a<1)return b.apply(this,arguments)}},s.before=function(a,b){var c;return function(){return--a>0&&(c=b.apply(this,arguments)),a<=1&&(b=null),c}},s.once=s.partial(s.before,2);var E=!{toString:null}.propertyIsEnumerable("toString"),F=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];s.keys=function(a){if(!s.isObject(a))return[];if(o)return o(a);var b=[];for(var c in a)s.has(a,c)&&b.push(c);return E&&d(a,b),b},s.allKeys=function(a){if(!s.isObject(a))return[];var b=[];for(var c in a)b.push(c);return E&&d(a,b),b},s.values=function(a){for(var b=s.keys(a),c=b.length,d=Array(c),e=0;e<c;e++)d[e]=a[b[e]];return d},s.mapObject=function(a,b,c){b=u(b,c);for(var d,e=s.keys(a),f=e.length,g={},h=0;h<f;h++)d=e[h],g[d]=b(a[d],d,a);return g},s.pairs=function(a){for(var b=s.keys(a),c=b.length,d=Array(c),e=0;e<c;e++)d[e]=[b[e],a[b[e]]];return d},s.invert=function(a){for(var b={},c=s.keys(a),d=0,e=c.length;d<e;d++)b[a[c[d]]]=c[d];return b},s.functions=s.methods=function(a){var b=[];for(var c in a)s.isFunction(a[c])&&b.push(c);return b.sort()},s.extend=v(s.allKeys),s.extendOwn=s.assign=v(s.keys),s.findKey=function(a,b,c){b=u(b,c);for(var d,e=s.keys(a),f=0,g=e.length;f<g;f++)if(d=e[f],b(a[d],d,a))return d},s.pick=function(a,b,c){var d,e,f={},g=a;if(null==g)return f;s.isFunction(b)?(e=s.allKeys(g),d=t(b,c)):(e=C(arguments,!1,!1,1),d=function(a,b,c){return b in c},g=Object(g));for(var h=0,i=e.length;h<i;h++){var j=e[h],k=g[j];d(k,j,g)&&(f[j]=k)}return f},s.omit=function(a,b,c){if(s.isFunction(b))b=s.negate(b);else{var d=s.map(C(arguments,!1,!1,1),String);b=function(a,b){return!s.contains(d,b)}}return s.pick(a,b,c)},s.defaults=v(s.allKeys,!0),s.create=function(a,b){var c=w(a);return b&&s.extendOwn(c,b),c},s.clone=function(a){return s.isObject(a)?s.isArray(a)?a.slice():s.extend({},a):a},s.tap=function(a,b){return b(a),a},s.isMatch=function(a,b){var c=s.keys(b),d=c.length;if(null==a)return!d;for(var e=Object(a),f=0;f<d;f++){var g=c[f];if(b[g]!==e[g]||!(g in e))return!1}return!0};var G=function(a,b,c,d){if(a===b)return 0!==a||1/a===1/b;if(null==a||null==b)return a===b;a instanceof s&&(a=a._wrapped),b instanceof s&&(b=b._wrapped);var e=l.call(a);if(e!==l.call(b))return!1;switch(e){case"[object RegExp]":case"[object String]":return""+a==""+b;case"[object Number]":return+a!==+a?+b!==+b:0===+a?1/+a===1/b:+a===+b;case"[object Date]":case"[object Boolean]":return+a===+b}var f="[object Array]"===e;if(!f){if("object"!=typeof a||"object"!=typeof b)return!1;var g=a.constructor,h=b.constructor;if(g!==h&&!(s.isFunction(g)&&g instanceof g&&s.isFunction(h)&&h instanceof h)&&"constructor"in a&&"constructor"in b)return!1}c=c||[],d=d||[];for(var i=c.length;i--;)if(c[i]===a)return d[i]===b;if(c.push(a),d.push(b),f){if(i=a.length,i!==b.length)return!1;for(;i--;)if(!G(a[i],b[i],c,d))return!1}else{var j,k=s.keys(a);if(i=k.length,s.keys(b).length!==i)return!1;for(;i--;)if(j=k[i],!s.has(b,j)||!G(a[j],b[j],c,d))return!1}return c.pop(),d.pop(),!0};s.isEqual=function(a,b){return G(a,b)},s.isEmpty=function(a){return null==a||(A(a)&&(s.isArray(a)||s.isString(a)||s.isArguments(a))?0===a.length:0===s.keys(a).length)},s.isElement=function(a){return!(!a||1!==a.nodeType)},s.isArray=n||function(a){return"[object Array]"===l.call(a)},s.isObject=function(a){var b=typeof a;return"function"===b||"object"===b&&!!a},s.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(a){s["is"+a]=function(b){return l.call(b)==="[object "+a+"]"}}),s.isArguments(arguments)||(s.isArguments=function(a){return s.has(a,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(s.isFunction=function(a){return"function"==typeof a||!1}),s.isFinite=function(a){return isFinite(a)&&!isNaN(parseFloat(a))},s.isNaN=function(a){return s.isNumber(a)&&a!==+a},s.isBoolean=function(a){return a===!0||a===!1||"[object Boolean]"===l.call(a)},s.isNull=function(a){return null===a},s.isUndefined=function(a){return void 0===a},s.has=function(a,b){return null!=a&&m.call(a,b)},s.noConflict=function(){return e._=f,this},s.identity=function(a){return a},s.constant=function(a){return function(){return a}},s.noop=function(){},s.property=x,s.propertyOf=function(a){return null==a?function(){}:function(b){return a[b]}},s.matcher=s.matches=function(a){return a=s.extendOwn({},a),function(b){return s.isMatch(b,a)}},s.times=function(a,b,c){var d=Array(Math.max(0,a));b=t(b,c,1);for(var e=0;e<a;e++)d[e]=b(e);return d},s.random=function(a,b){return null==b&&(b=a,a=0),a+Math.floor(Math.random()*(b-a+1))},s.now=Date.now||function(){return(new Date).getTime()};var H={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},I=s.invert(H),J=function(a){var b=function(b){return a[b]},c="(?:"+s.keys(a).join("|")+")",d=RegExp(c),e=RegExp(c,"g");return function(a){return a=null==a?"":""+a,d.test(a)?a.replace(e,b):a}};s.escape=J(H),s.unescape=J(I),s.result=function(a,b,c){var d=null==a?void 0:a[b];return void 0===d&&(d=c),s.isFunction(d)?d.call(a):d};var K=0;s.uniqueId=function(a){var b=++K+"";return a?a+b:b},s.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var L=/(.)^/,M={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},N=/\\|'|\r|\n|\u2028|\u2029/g,O=function(a){return"\\"+M[a]};s.template=function(a,b,c){!b&&c&&(b=c),b=s.defaults({},b,s.templateSettings);var d=RegExp([(b.escape||L).source,(b.interpolate||L).source,(b.evaluate||L).source].join("|")+"|$","g"),e=0,f="__p+='";a.replace(d,function(b,c,d,g,h){return f+=a.slice(e,h).replace(N,O),e=h+b.length,c?f+="'+\n((__t=("+c+"))==null?'':_.escape(__t))+\n'":d?f+="'+\n((__t=("+d+"))==null?'':__t)+\n'":g&&(f+="';\n"+g+"\n__p+='"),b}),f+="';\n",b.variable||(f="with(obj||{}){\n"+f+"}\n"),f="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+f+"return __p;\n";try{var g=new Function(b.variable||"obj","_",f)}catch(h){throw h.source=f,h}var i=function(a){return g.call(this,a,s)},j=b.variable||"obj";return i.source="function("+j+"){\n"+f+"}",i},s.chain=function(a){var b=s(a);return b._chain=!0,b};var P=function(a,b){return a._chain?s(b).chain():b};s.mixin=function(a){s.each(s.functions(a),function(b){var c=s[b]=a[b];s.prototype[b]=function(){var a=[this._wrapped];return j.apply(a,arguments),P(this,c.apply(s,a))}})},s.mixin(s),s.each(["pop","push","reverse","shift","sort","splice","unshift"],function(a){var b=g[a];s.prototype[a]=function(){var c=this._wrapped;return b.apply(c,arguments),"shift"!==a&&"splice"!==a||0!==c.length||delete c[0],P(this,c)}}),s.each(["concat","join","slice"],function(a){var b=g[a];s.prototype[a]=function(){return P(this,b.apply(this._wrapped,arguments))}}),s.prototype.value=function(){return this._wrapped},s.prototype.valueOf=s.prototype.toJSON=s.prototype.value,s.prototype.toString=function(){return""+this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return s})}.call(this),function(a){var b="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global;if("function"==typeof define&&define.amd)define(["underscore","jquery","exports"],function(c,d,e){b.Backbone=a(b,e,c,d)});else if("undefined"!=typeof exports){var c,d=require("underscore");try{c=require("jquery")}catch(e){}a(b,exports,d,c)}else b.Backbone=a(b,{},b._,b.jQuery||b.Zepto||b.ender||b.$)}(function(a,b,c,d){var e=a.Backbone,f=Array.prototype.slice;b.VERSION="1.3.3",b.$=d,b.noConflict=function(){return a.Backbone=e,this},b.emulateHTTP=!1,b.emulateJSON=!1;var g=function(a,b,d){switch(a){case 1:return function(){return c[b](this[d])};case 2:return function(a){return c[b](this[d],a)};case 3:return function(a,e){return c[b](this[d],i(a,this),e)};case 4:return function(a,e,f){return c[b](this[d],i(a,this),e,f)};default:return function(){var a=f.call(arguments);return a.unshift(this[d]),c[b].apply(c,a)}}},h=function(a,b,d){c.each(b,function(b,e){c[e]&&(a.prototype[e]=g(b,e,d))})},i=function(a,b){return c.isFunction(a)?a:c.isObject(a)&&!b._isModel(a)?j(a):c.isString(a)?function(b){return b.get(a)}:a},j=function(a){var b=c.matches(a);return function(a){return b(a.attributes)}},k=b.Events={},l=/\s+/,m=function(a,b,d,e,f){var g,h=0;if(d&&"object"==typeof d){void 0!==e&&"context"in f&&void 0===f.context&&(f.context=e);for(g=c.keys(d);h<g.length;h++)b=m(a,b,g[h],d[g[h]],f)}else if(d&&l.test(d))for(g=d.split(l);h<g.length;h++)b=a(b,g[h],e,f);else b=a(b,d,e,f);return b};k.on=function(a,b,c){return n(this,a,b,c)};var n=function(a,b,c,d,e){if(a._events=m(o,a._events||{},b,c,{context:d,ctx:a,listening:e}),e){var f=a._listeners||(a._listeners={});f[e.id]=e}return a};k.listenTo=function(a,b,d){if(!a)return this;var e=a._listenId||(a._listenId=c.uniqueId("l")),f=this._listeningTo||(this._listeningTo={}),g=f[e];if(!g){var h=this._listenId||(this._listenId=c.uniqueId("l"));g=f[e]={obj:a,objId:e,id:h,listeningTo:f,count:0}}return n(a,b,d,this,g),this};var o=function(a,b,c,d){if(c){var e=a[b]||(a[b]=[]),f=d.context,g=d.ctx,h=d.listening;h&&h.count++,e.push({callback:c,context:f,ctx:f||g,listening:h})}return a};k.off=function(a,b,c){return this._events?(this._events=m(p,this._events,a,b,{context:c,listeners:this._listeners}),this):this},k.stopListening=function(a,b,d){var e=this._listeningTo;if(!e)return this;for(var f=a?[a._listenId]:c.keys(e),g=0;g<f.length;g++){var h=e[f[g]];if(!h)break;h.obj.off(b,d,this)}return this};var p=function(a,b,d,e){if(a){var f,g=0,h=e.context,i=e.listeners;if(b||d||h){for(var j=b?[b]:c.keys(a);g<j.length;g++){b=j[g];var k=a[b];if(!k)break;for(var l=[],m=0;m<k.length;m++){var n=k[m];d&&d!==n.callback&&d!==n.callback._callback||h&&h!==n.context?l.push(n):(f=n.listening,f&&0===--f.count&&(delete i[f.id],delete f.listeningTo[f.objId]))}l.length?a[b]=l:delete a[b]}return a}for(var o=c.keys(i);g<o.length;g++)f=i[o[g]],delete i[f.id],delete f.listeningTo[f.objId]}};k.once=function(a,b,d){var e=m(q,{},a,b,c.bind(this.off,this));return"string"==typeof a&&null==d&&(b=void 0),this.on(e,b,d)},k.listenToOnce=function(a,b,d){var e=m(q,{},b,d,c.bind(this.stopListening,this,a));return this.listenTo(a,e)};var q=function(a,b,d,e){if(d){var f=a[b]=c.once(function(){e(b,f),d.apply(this,arguments)});f._callback=d}return a};k.trigger=function(a){if(!this._events)return this;for(var b=Math.max(0,arguments.length-1),c=Array(b),d=0;d<b;d++)c[d]=arguments[d+1];return m(r,this._events,a,void 0,c),this};var r=function(a,b,c,d){if(a){var e=a[b],f=a.all;e&&f&&(f=f.slice()),e&&s(e,d),f&&s(f,[b].concat(d))}return a},s=function(a,b){var c,d=-1,e=a.length,f=b[0],g=b[1],h=b[2];switch(b.length){case 0:for(;++d<e;)(c=a[d]).callback.call(c.ctx);return;case 1:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f);return;case 2:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f,g);return;case 3:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f,g,h);return;default:for(;++d<e;)(c=a[d]).callback.apply(c.ctx,b);return}};k.bind=k.on,k.unbind=k.off,c.extend(b,k);var t=b.Model=function(a,b){var d=a||{};b||(b={}),this.cid=c.uniqueId(this.cidPrefix),this.attributes={},b.collection&&(this.collection=b.collection),b.parse&&(d=this.parse(d,b)||{});var e=c.result(this,"defaults");d=c.defaults(c.extend({},e,d),e),this.set(d,b),this.changed={},this.initialize.apply(this,arguments)};c.extend(t.prototype,k,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",initialize:function(){},toJSON:function(a){return c.clone(this.attributes)},sync:function(){return b.sync.apply(this,arguments)},get:function(a){return this.attributes[a]},escape:function(a){return c.escape(this.get(a))},has:function(a){return null!=this.get(a)},matches:function(a){return!!c.iteratee(a,this)(this.attributes)},set:function(a,b,d){if(null==a)return this;var e;if("object"==typeof a?(e=a,d=b):(e={})[a]=b,d||(d={}),!this._validate(e,d))return!1;var f=d.unset,g=d.silent,h=[],i=this._changing;this._changing=!0,i||(this._previousAttributes=c.clone(this.attributes),this.changed={});var j=this.attributes,k=this.changed,l=this._previousAttributes;for(var m in e)b=e[m],c.isEqual(j[m],b)||h.push(m),c.isEqual(l[m],b)?delete k[m]:k[m]=b,f?delete j[m]:j[m]=b;if(this.idAttribute in e&&(this.id=this.get(this.idAttribute)),!g){h.length&&(this._pending=d);for(var n=0;n<h.length;n++)this.trigger("change:"+h[n],this,j[h[n]],d)}if(i)return this;if(!g)for(;this._pending;)d=this._pending,this._pending=!1,this.trigger("change",this,d);return this._pending=!1,this._changing=!1,this},unset:function(a,b){return this.set(a,void 0,c.extend({},b,{unset:!0}))},clear:function(a){var b={};for(var d in this.attributes)b[d]=void 0;return this.set(b,c.extend({},a,{unset:!0}))},hasChanged:function(a){return null==a?!c.isEmpty(this.changed):c.has(this.changed,a)},changedAttributes:function(a){if(!a)return!!this.hasChanged()&&c.clone(this.changed);var b=this._changing?this._previousAttributes:this.attributes,d={};for(var e in a){var f=a[e];c.isEqual(b[e],f)||(d[e]=f)}return!!c.size(d)&&d},previous:function(a){return null!=a&&this._previousAttributes?this._previousAttributes[a]:null},previousAttributes:function(){return c.clone(this._previousAttributes)},fetch:function(a){a=c.extend({parse:!0},a);var b=this,d=a.success;return a.success=function(c){var e=a.parse?b.parse(c,a):c;return!!b.set(e,a)&&(d&&d.call(a.context,b,c,a),void b.trigger("sync",b,c,a))},P(this,a),this.sync("read",this,a)},save:function(a,b,d){var e;null==a||"object"==typeof a?(e=a,d=b):(e={})[a]=b,d=c.extend({validate:!0,parse:!0},d);var f=d.wait;if(e&&!f){if(!this.set(e,d))return!1}else if(!this._validate(e,d))return!1;var g=this,h=d.success,i=this.attributes;d.success=function(a){g.attributes=i;var b=d.parse?g.parse(a,d):a;return f&&(b=c.extend({},e,b)),!(b&&!g.set(b,d))&&(h&&h.call(d.context,g,a,d),void g.trigger("sync",g,a,d))},P(this,d),e&&f&&(this.attributes=c.extend({},i,e));var j=this.isNew()?"create":d.patch?"patch":"update";"patch"!==j||d.attrs||(d.attrs=e);var k=this.sync(j,this,d);return this.attributes=i,k},destroy:function(a){a=a?c.clone(a):{};var b=this,d=a.success,e=a.wait,f=function(){b.stopListening(),b.trigger("destroy",b,b.collection,a)};a.success=function(c){e&&f(),d&&d.call(a.context,b,c,a),b.isNew()||b.trigger("sync",b,c,a)};var g=!1;return this.isNew()?c.defer(a.success):(P(this,a),g=this.sync("delete",this,a)),e||f(),g},url:function(){var a=c.result(this,"urlRoot")||c.result(this.collection,"url")||O();if(this.isNew())return a;var b=this.get(this.idAttribute);return a.replace(/[^\/]$/,"$&/")+encodeURIComponent(b)},parse:function(a,b){return a},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(a){return this._validate({},c.extend({},a,{validate:!0}))},_validate:function(a,b){if(!b.validate||!this.validate)return!0;a=c.extend({},this.attributes,a);var d=this.validationError=this.validate(a,b)||null;return!d||(this.trigger("invalid",this,d,c.extend(b,{validationError:d})),!1)}});var u={keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1};h(t,u,"attributes");var v=b.Collection=function(a,b){b||(b={}),b.model&&(this.model=b.model),void 0!==b.comparator&&(this.comparator=b.comparator),this._reset(),this.initialize.apply(this,arguments),a&&this.reset(a,c.extend({silent:!0},b))},w={add:!0,remove:!0,merge:!0},x={add:!0,remove:!1},y=function(a,b,c){c=Math.min(Math.max(c,0),a.length);var d,e=Array(a.length-c),f=b.length;for(d=0;d<e.length;d++)e[d]=a[d+c];for(d=0;d<f;d++)a[d+c]=b[d];for(d=0;d<e.length;d++)a[d+f+c]=e[d]};c.extend(v.prototype,k,{model:t,initialize:function(){},toJSON:function(a){return this.map(function(b){return b.toJSON(a)})},sync:function(){return b.sync.apply(this,arguments)},add:function(a,b){return this.set(a,c.extend({merge:!1},b,x))},remove:function(a,b){b=c.extend({},b);var d=!c.isArray(a);a=d?[a]:a.slice();var e=this._removeModels(a,b);return!b.silent&&e.length&&(b.changes={added:[],merged:[],removed:e},this.trigger("update",this,b)),d?e[0]:e},set:function(a,b){if(null!=a){b=c.extend({},w,b),b.parse&&!this._isModel(a)&&(a=this.parse(a,b)||[]);var d=!c.isArray(a);a=d?[a]:a.slice();var e=b.at;null!=e&&(e=+e),e>this.length&&(e=this.length),e<0&&(e+=this.length+1);var f,g,h=[],i=[],j=[],k=[],l={},m=b.add,n=b.merge,o=b.remove,p=!1,q=this.comparator&&null==e&&b.sort!==!1,r=c.isString(this.comparator)?this.comparator:null;for(g=0;g<a.length;g++){f=a[g];var s=this.get(f);if(s){if(n&&f!==s){var t=this._isModel(f)?f.attributes:f;b.parse&&(t=s.parse(t,b)),s.set(t,b),j.push(s),q&&!p&&(p=s.hasChanged(r))}l[s.cid]||(l[s.cid]=!0,h.push(s)),a[g]=s}else m&&(f=a[g]=this._prepareModel(f,b),f&&(i.push(f),this._addReference(f,b),l[f.cid]=!0,h.push(f)))}if(o){for(g=0;g<this.length;g++)f=this.models[g],l[f.cid]||k.push(f);k.length&&this._removeModels(k,b)}var u=!1,v=!q&&m&&o;if(h.length&&v?(u=this.length!==h.length||c.some(this.models,function(a,b){return a!==h[b]}),this.models.length=0,y(this.models,h,0),this.length=this.models.length):i.length&&(q&&(p=!0),y(this.models,i,null==e?this.length:e),this.length=this.models.length),p&&this.sort({silent:!0}),!b.silent){for(g=0;g<i.length;g++)null!=e&&(b.index=e+g),f=i[g],f.trigger("add",f,this,b);(p||u)&&this.trigger("sort",this,b),(i.length||k.length||j.length)&&(b.changes={added:i,removed:k,merged:j},this.trigger("update",this,b))}return d?a[0]:a}},reset:function(a,b){b=b?c.clone(b):{};for(var d=0;d<this.models.length;d++)this._removeReference(this.models[d],b);return b.previousModels=this.models,this._reset(),a=this.add(a,c.extend({silent:!0},b)),b.silent||this.trigger("reset",this,b),a},push:function(a,b){return this.add(a,c.extend({at:this.length},b))},pop:function(a){var b=this.at(this.length-1);return this.remove(b,a)},unshift:function(a,b){return this.add(a,c.extend({at:0},b))},shift:function(a){var b=this.at(0);return this.remove(b,a)},slice:function(){return f.apply(this.models,arguments)},get:function(a){if(null!=a)return this._byId[a]||this._byId[this.modelId(a.attributes||a)]||a.cid&&this._byId[a.cid]},has:function(a){return null!=this.get(a)},at:function(a){return a<0&&(a+=this.length),this.models[a]},where:function(a,b){return this[b?"find":"filter"](a)},findWhere:function(a){return this.where(a,!0)},sort:function(a){var b=this.comparator;if(!b)throw new Error("Cannot sort a set without a comparator");a||(a={});var d=b.length;return c.isFunction(b)&&(b=c.bind(b,this)),1===d||c.isString(b)?this.models=this.sortBy(b):this.models.sort(b),a.silent||this.trigger("sort",this,a),this},pluck:function(a){return this.map(a+"")},fetch:function(a){a=c.extend({parse:!0},a);var b=a.success,d=this;return a.success=function(c){var e=a.reset?"reset":"set";d[e](c,a),b&&b.call(a.context,d,c,a),d.trigger("sync",d,c,a)},P(this,a),this.sync("read",this,a)},create:function(a,b){b=b?c.clone(b):{};var d=b.wait;if(a=this._prepareModel(a,b),!a)return!1;d||this.add(a,b);var e=this,f=b.success;return b.success=function(a,b,c){d&&e.add(a,c),f&&f.call(c.context,a,b,c)},a.save(null,b),a},parse:function(a,b){return a},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(a){return a[this.model.prototype.idAttribute||"id"]},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(a,b){if(this._isModel(a))return a.collection||(a.collection=this),a;b=b?c.clone(b):{},b.collection=this;var d=new this.model(a,b);return d.validationError?(this.trigger("invalid",this,d.validationError,b),!1):d},_removeModels:function(a,b){for(var c=[],d=0;d<a.length;d++){var e=this.get(a[d]);if(e){var f=this.indexOf(e);this.models.splice(f,1),this.length--,delete this._byId[e.cid];var g=this.modelId(e.attributes);null!=g&&delete this._byId[g],b.silent||(b.index=f,e.trigger("remove",e,this,b)),c.push(e),this._removeReference(e,b)}}return c},_isModel:function(a){return a instanceof t},_addReference:function(a,b){this._byId[a.cid]=a;var c=this.modelId(a.attributes);null!=c&&(this._byId[c]=a),a.on("all",this._onModelEvent,this)},_removeReference:function(a,b){delete this._byId[a.cid];var c=this.modelId(a.attributes);null!=c&&delete this._byId[c],this===a.collection&&delete a.collection,a.off("all",this._onModelEvent,this)},_onModelEvent:function(a,b,c,d){if(b){if(("add"===a||"remove"===a)&&c!==this)return;if("destroy"===a&&this.remove(b,d),"change"===a){var e=this.modelId(b.previousAttributes()),f=this.modelId(b.attributes);e!==f&&(null!=e&&delete this._byId[e],null!=f&&(this._byId[f]=b))}}this.trigger.apply(this,arguments)}});var z={forEach:3,each:3,map:3,collect:3,reduce:0,foldl:0,inject:0,reduceRight:0,foldr:0,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:3,includes:3,contains:3,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3,groupBy:3,countBy:3,sortBy:3,indexBy:3,findIndex:3,findLastIndex:3};h(v,z,"models");var A=b.View=function(a){this.cid=c.uniqueId("view"),c.extend(this,c.pick(a,C)),this._ensureElement(),this.initialize.apply(this,arguments)},B=/^(\S+)\s*(.*)$/,C=["model","collection","el","id","attributes","className","tagName","events"];c.extend(A.prototype,k,{tagName:"div",$:function(a){return this.$el.find(a)},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(a){return this.undelegateEvents(),this._setElement(a),this.delegateEvents(),this},_setElement:function(a){this.$el=a instanceof b.$?a:b.$(a),this.el=this.$el[0]},delegateEvents:function(a){if(a||(a=c.result(this,"events")),!a)return this;this.undelegateEvents();for(var b in a){var d=a[b];if(c.isFunction(d)||(d=this[d]),d){var e=b.match(B);this.delegate(e[1],e[2],c.bind(d,this))}}return this},delegate:function(a,b,c){return this.$el.on(a+".delegateEvents"+this.cid,b,c),this},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(a,b,c){return this.$el.off(a+".delegateEvents"+this.cid,b,c),this},_createElement:function(a){return document.createElement(a)},_ensureElement:function(){if(this.el)this.setElement(c.result(this,"el"));else{var a=c.extend({},c.result(this,"attributes"));this.id&&(a.id=c.result(this,"id")),this.className&&(a["class"]=c.result(this,"className")),this.setElement(this._createElement(c.result(this,"tagName"))),this._setAttributes(a)}},_setAttributes:function(a){this.$el.attr(a)}}),b.sync=function(a,d,e){var f=D[a];c.defaults(e||(e={}),{emulateHTTP:b.emulateHTTP,emulateJSON:b.emulateJSON});var g={type:f,dataType:"json"};if(e.url||(g.url=c.result(d,"url")||O()),null!=e.data||!d||"create"!==a&&"update"!==a&&"patch"!==a||(g.contentType="application/json",g.data=JSON.stringify(e.attrs||d.toJSON(e))),e.emulateJSON&&(g.contentType="application/x-www-form-urlencoded",g.data=g.data?{model:g.data}:{}),e.emulateHTTP&&("PUT"===f||"DELETE"===f||"PATCH"===f)){g.type="POST",e.emulateJSON&&(g.data._method=f);var h=e.beforeSend;e.beforeSend=function(a){if(a.setRequestHeader("X-HTTP-Method-Override",f),h)return h.apply(this,arguments)}}"GET"===g.type||e.emulateJSON||(g.processData=!1);var i=e.error;e.error=function(a,b,c){e.textStatus=b,e.errorThrown=c,i&&i.call(e.context,a,b,c)};var j=e.xhr=b.ajax(c.extend(g,e));return d.trigger("request",d,j,e),j};var D={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};b.ajax=function(){return b.$.ajax.apply(b.$,arguments)};var E=b.Router=function(a){a||(a={}),a.routes&&(this.routes=a.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},F=/\((.*?)\)/g,G=/(\(\?)?:\w+/g,H=/\*\w+/g,I=/[\-{}\[\]+?.,\\\^$|#\s]/g;c.extend(E.prototype,k,{initialize:function(){},route:function(a,d,e){c.isRegExp(a)||(a=this._routeToRegExp(a)),c.isFunction(d)&&(e=d,d=""),e||(e=this[d]);var f=this;return b.history.route(a,function(c){var g=f._extractParameters(a,c);f.execute(e,g,d)!==!1&&(f.trigger.apply(f,["route:"+d].concat(g)),f.trigger("route",d,g),b.history.trigger("route",f,d,g))}),this},execute:function(a,b,c){a&&a.apply(this,b)},navigate:function(a,c){return b.history.navigate(a,c),this},_bindRoutes:function(){if(this.routes){this.routes=c.result(this,"routes");for(var a,b=c.keys(this.routes);null!=(a=b.pop());)this.route(a,this.routes[a])}},_routeToRegExp:function(a){return a=a.replace(I,"\\$&").replace(F,"(?:$1)?").replace(G,function(a,b){return b?a:"([^/?]+)"}).replace(H,"([^?]*?)"),new RegExp("^"+a+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(a,b){var d=a.exec(b).slice(1);return c.map(d,function(a,b){return b===d.length-1?a||null:a?decodeURIComponent(a):null})}});var J=b.History=function(){this.handlers=[],this.checkUrl=c.bind(this.checkUrl,this),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},K=/^[#\/]|\s+$/g,L=/^\/+|\/+$/g,M=/#.*$/;J.started=!1,c.extend(J.prototype,k,{interval:50,atRoot:function(){var a=this.location.pathname.replace(/[^\/]$/,"$&/");return a===this.root&&!this.getSearch()},matchRoot:function(){var a=this.decodeFragment(this.location.pathname),b=a.slice(0,this.root.length-1)+"/";return b===this.root},decodeFragment:function(a){return decodeURI(a.replace(/%25/g,"%2525"))},getSearch:function(){var a=this.location.href.replace(/#.*/,"").match(/\?.+/);return a?a[0]:""},getHash:function(a){var b=(a||this).location.href.match(/#(.*)$/);return b?b[1]:""},getPath:function(){var a=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return"/"===a.charAt(0)?a.slice(1):a},getFragment:function(a){return null==a&&(a=this._usePushState||!this._wantsHashChange?this.getPath():this.getHash()),a.replace(K,"")},start:function(a){if(J.started)throw new Error("Backbone.history has already been started");if(J.started=!0,this.options=c.extend({root:"/"},this.options,a),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._hasHashChange="onhashchange"in window&&(void 0===document.documentMode||document.documentMode>7),this._useHashChange=this._wantsHashChange&&this._hasHashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!(!this.history||!this.history.pushState),this._usePushState=this._wantsPushState&&this._hasPushState,this.fragment=this.getFragment(),this.root=("/"+this.root+"/").replace(L,"/"),this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot()){var b=this.root.slice(0,-1)||"/";return this.location.replace(b+"#"+this.getPath()),!0}this._hasPushState&&this.atRoot()&&this.navigate(this.getHash(),{replace:!0})}if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){this.iframe=document.createElement("iframe"),this.iframe.src="javascript:0",this.iframe.style.display="none",this.iframe.tabIndex=-1;var d=document.body,e=d.insertBefore(this.iframe,d.firstChild).contentWindow;e.document.open(),e.document.close(),e.location.hash="#"+this.fragment}var f=window.addEventListener||function(a,b){return attachEvent("on"+a,b)};if(this._usePushState?f("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe?f("hashchange",this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),!this.options.silent)return this.loadUrl()},stop:function(){var a=window.removeEventListener||function(a,b){return detachEvent("on"+a,b)};this._usePushState?a("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe&&a("hashchange",this.checkUrl,!1),this.iframe&&(document.body.removeChild(this.iframe),this.iframe=null),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),J.started=!1},route:function(a,b){this.handlers.unshift({route:a,callback:b})},checkUrl:function(a){var b=this.getFragment();return b===this.fragment&&this.iframe&&(b=this.getHash(this.iframe.contentWindow)),b!==this.fragment&&(this.iframe&&this.navigate(b),void this.loadUrl())},loadUrl:function(a){return!!this.matchRoot()&&(a=this.fragment=this.getFragment(a),c.some(this.handlers,function(b){if(b.route.test(a))return b.callback(a),!0}))},navigate:function(a,b){if(!J.started)return!1;b&&b!==!0||(b={trigger:!!b}),a=this.getFragment(a||"");var c=this.root;""!==a&&"?"!==a.charAt(0)||(c=c.slice(0,-1)||"/");var d=c+a;if(a=this.decodeFragment(a.replace(M,"")),this.fragment!==a){if(this.fragment=a,this._usePushState)this.history[b.replace?"replaceState":"pushState"]({},document.title,d);else{if(!this._wantsHashChange)return this.location.assign(d);if(this._updateHash(this.location,a,b.replace),this.iframe&&a!==this.getHash(this.iframe.contentWindow)){var e=this.iframe.contentWindow;b.replace||(e.document.open(),e.document.close()),this._updateHash(e.location,a,b.replace)}}return b.trigger?this.loadUrl(a):void 0}},_updateHash:function(a,b,c){if(c){var d=a.href.replace(/(javascript:|#).*$/,"");a.replace(d+"#"+b)}else a.hash="#"+b}}),b.history=new J;var N=function(a,b){var d,e=this;return d=a&&c.has(a,"constructor")?a.constructor:function(){return e.apply(this,arguments)},c.extend(d,e,b),d.prototype=c.create(e.prototype,a),d.prototype.constructor=d,d.__super__=e.prototype,d};t.extend=v.extend=E.extend=A.extend=J.extend=N;var O=function(){throw new Error('A "url" property or function must be specified')},P=function(a,b){var c=b.error;b.error=function(d){c&&c.call(b.context,a,d,b),a.trigger("error",a,d,b)}};return b}),!function(a){var b="boundTo",c=a.defineProperty,d=c.bind||function(a){var b=this;return function(){return b.apply(a,arguments)}};c(a.prototype,b,{value:function(a,e){var f=[],g=[],h=this;return c(h,b,{value:function(a,b){var c=f.indexOf(a),a=c<0?g[c=f.push(a)-1]=d.call(a,h):g[c];return 0==b&&(f.splice(c,1),
g.splice(c,1)),a}}),h[b](a,e)}})}(Object),TimePick=function(a){var b=new Date,c=b.getHours(),d=b.getMinutes(),e=c>=12?"PM":"AM";c%=12,c=c?c:12,d=d<10?"0"+d:d,c=c<10?"0"+c:c,a.minSelected||(a.minSelected=d),a.hourSelected||(a.hourSelected=c),a.indicatorSelected||(a.indicatorSelected=e),this.minutes=[],this.selectedMinIndex=-1,this.hours=[],this.selectedHourIndex=-1,this.indicators=["AM","PM"],this.indicatorSelectedIndex=-1,this.setConfiguration(a),this.makeTime()},TimePick.prototype.setConfiguration=function(a){if(this.target=document.getElementById(a.target),a.onSelected&&"function"==typeof a.onSelected&&(this.onSelected=a.onSelected),null!=this.target.textContent&&""!=this.target.textContent.trim()){var b=this.target.textContent.substring(0,2),c=this.target.textContent.substring(3,5),d=this.target.textContent.substring(6,8);a.minSelected=c,a.hourSelected=b,a.indicatorSelected=d}for(var e=0;e<60;e++){var f=e;f=e<10?"0"+e:e.toString(),f!=a.minSelected&&e!=a.minSelected||(this.selectedMinIndex=e),this.minutes.push(f)}for(var e=0;e<12;e++){var g=e;g=0==e?"12":e<10?"0"+e:e.toString(),e!=a.hourSelected&&e!=a.hourSelected||(this.selectedHourIndex=e),this.hours.push(g)}"PM"==a.indicatorSelected||"pm"==a.indicatorSelected?this.indicatorSelectedIndex=1:"AM"!=a.indicatorSelected&&"am"!=a.indicatorSelected||(this.indicatorSelectedIndex=0)},TimePick.prototype.close=function(a){var b=document.getElementById("backgroundDiv");b.style.display="none",this.target.textContent=this.hours[this.hour.selectedIndex]+":"+this.minutes[this.minute.selectedIndex]+" "+this.indicators[this.indicator.selectedIndex],this.onSelected&&"function"==typeof this.onSelected&&this.onSelected(),a.stopPropagation()},TimePick.prototype.show=function(a){var b=document.getElementById("backgroundDiv");b.style.display="block"},TimePick.prototype.makeTime=function(){var a=document.createElement("div");a.id="backgroundDiv",a.style.display="none",document.body.appendChild(a),this.target.addEventListener("click",this.boundTo(this.show)),this.target.addEventListener("focus",this.boundTo(this.show)),a.addEventListener("mousedown",this.boundTo(this.close)),this.container=document.createElement("div"),this.container.className="timeContainer",this.container.style.marginTop="-95px",this.container.style.marginLeft="-110px",this.container.onmousedown=function(a){a.stopPropagation()},a.appendChild(this.container),this.hour=new Roller({values:this.hours,selectedIndex:this.selectedHourIndex,addTo:".timeContainer"}),this.minute=new Roller({values:this.minutes,selectedIndex:this.selectedMinIndex,addTo:".timeContainer"}),this.indicator=new Roller({values:this.indicators,selectedIndex:this.indicatorSelectedIndex,addTo:".timeContainer"})},TimePick.prototype.destroy=function(){this.minute.destroy(),this.hour.destroy(),this.indicator.destroy();var a=document.getElementById("backgroundDiv");this.target.removeEventListener("click",this.boundTo(this.show)),this.target.removeEventListener("focus",this.boundTo(this.show)),a.removeEventListener("mousedown",this.boundTo(this.close)),this.container.onmousedown=null,a.parentNode.removeChild(a)},SelectRoller=function(a){this.setConfiguration(a),this.makeSelect()},SelectRoller.prototype.destroy=function(){this.select.destroy();for(var a=document.getElementById("backgroundDiv"),b=0;b<this.targets.length;b++)this.targets[b].removeEventListener("click",this.boundTo(this.show)),this.targets[b].removeEventListener("focus",this.boundTo(this.show));a.removeEventListener("mousedown",this.boundTo(this.close)),a.parentNode.removeChild(a)},SelectRoller.prototype.setConfiguration=function(a){this.targets=document.getElementsByClassName(a.targets),this.width=null!=a.width&&a.width>=0?a.width:80,this.values=null!=a.values?a.values:[],a.onSelected&&"function"==typeof a.onSelected&&(this.onSelected=a.onSelected)},SelectRoller.prototype.close=function(a){var b=document.getElementById("backgroundDiv");b.style.display="none",this.actualTarget.textContent=this.values[this.select.selectedIndex],this.onSelected&&"function"==typeof this.onSelected&&this.onSelected(),a.stopPropagation()},SelectRoller.prototype.show=function(a){var b=document.getElementById("backgroundDiv");b.style.display="block",this.actualTarget=a.currentTarget;for(var c=0;c<this.values.length;c++)this.actualTarget.textContent==this.values[c]&&this.select.selectIndex(c)},SelectRoller.prototype.makeSelect=function(){var a=document.createElement("div");a.id="backgroundDiv",a.style.display="none",document.body.appendChild(a),a.addEventListener("mousedown",this.boundTo(this.close));var b=document.createElement("div");b.className="selectContainer",b.style.marginTop="-95px",b.style.marginLeft=-(this.width+40)/2+"px",b.onmousedown=function(a){a.stopPropagation()},a.appendChild(b);for(var c=0;c<this.targets.length;c++)this.targets[c].addEventListener("click",this.boundTo(this.show)),this.targets[c].addEventListener("focus",this.boundTo(this.show));this.select=new Roller({values:this.values,addTo:".selectContainer",width:this.width})},Roller=function(a){this.configuration={},this.setConfiguration(a),this.makeRoller()},Roller.setClass=function(a,b){a.className=b},Roller.addClass=function(a,b){a.className+=" "+b},Roller.removeClass=function(a,b){var c=new RegExp("(\\s|^)"+b+"(\\s|$)");a.className=a.className.replace(c," ").trim()},Roller.hasClass=function(a,b){return(" "+a.className+" ").indexOf(" "+b+" ")>-1},Roller.prototype.selectedIndex=0,Roller.prototype.destroy=function(){this.rollerContainer.removeEventListener("mousedown",this.boundTo(this.onMouseDown)),this.rollerContainer.removeEventListener("mousedown",this.boundTo(this.onClick)),this.rollerContainer.parentNode.removeChild(this.rollerContainer)},Roller.prototype.makeRoller=function(){var a=null,b=this.configuration.addTo;a="#"===b[0]?document.getElementById(b.substr(1,b.length-1)):"."===b[0]?document.getElementsByClassName(b.substr(1,b.length-1))[0]:document.getElementsByTagName(b)[0],this.rollerContainer=document.createElement("div"),this.roller=document.createElement("div");var c=document.createElement("div"),d=document.createElement("div");this.rollerContainer.className="rollerContainer",this.rollerContainer.style.height=(this.factor+2*this.padding)*this.visible+"px",this.rollerContainer.style.maxHeight=(this.factor+2*this.padding)*this.visible+"px",this.rollerContainer.style.fontSize="30px",a.appendChild(this.rollerContainer),this.roller.className="roller";for(var e=0;e<this.configuration.values.length;e++){var f=document.createElement("span");f.className="item-"+(e+1),f.textContent=this.configuration.values[e],f.style.padding=this.padding+"px",e+1===this.configuration.selectedIndex&&Roller.addClass(f,"selected"),f.style.height=this.factor+2*this.padding+"px",f.style.maxHeight=this.factor+2*this.padding+"px",f.style.lineHeight=this.factor+2*this.padding+"px",this.roller.appendChild(f)}this.roller.style.transition="all 0s ease-out",this.roller.style.webkitTransition="all 0s ease-out",this.roller.style.webkitTransform="translate3d(0px, "+this.actualTop+"px, 0px)",this.roller.style.marginTop=-this.padding+"px",this.rollerContainer.appendChild(this.roller),c.className="effect",this.rollerContainer.appendChild(c),d.className="indicator",d.style.height=this.factor+2*this.padding+"px",d.style.maxHeight=this.factor+2*this.padding+"px",d.style.lineHeight=this.factor+2*this.padding+"px",d.style.top=(this.factor+2*this.padding)*Math.floor(this.visible/2)+"px",this.rollerContainer.appendChild(d),this.rollerContainer.style.width=this.width+"px",this.rollerContainer.addEventListener("mousedown",this.boundTo(this.onMouseDown)),this.rollerContainer.addEventListener("click",this.boundTo(this.onClick)),this.clearSelected()},Roller.prototype.setConfiguration=function(a){this.configuration.addTo=null!=a.addTo?a.addTo:"body",this.selectedIndex=null!=a.selectedIndex&&a.selectedIndex>=0?a.selectedIndex:0,this.width=null!=a.width&&a.width>=0?a.width:60,this.configuration.values=null!=a.values?a.values:[],this.factor=30,this.visible=5,this.padding=5,this.tempo=30,this.ac=5e-4,this.initialY=0,this.actualTop=(this.selectedIndex*-1+2)*(this.factor+2*this.padding),this.deslc=0,this.lastmousey=-1,this.lastmousetime=-1,this.sentido=1},Roller.prototype.selectIndex=function(a){this.selectedIndex=a,this.actualTop=((a+1)*-1+3)*(this.factor+2*this.padding),this.roller.style.transition="all 0.0s ease-out",this.roller.style.webkitTransition="all 0.0s ease-out",this.roller.style.webkitTransform="translate3d(0px, "+this.actualTop+"px, 0px)",this.clearSelected()},Roller.prototype.clearSelected=function(){for(var a=this.roller.getElementsByClassName("selected"),b=0;b<a.length;b++)Roller.removeClass(a[b],"selected");Roller.addClass(this.roller.getElementsByClassName("item-"+(this.selectedIndex+1))[0],"selected")},Roller.prototype.onClick=function(a){a.stopPropagation()},Roller.prototype.onMouseDown=function(a){this.initialY=a.clientY,this.vel=0,this.deslc=0,this.roller.style.transition="all 0.001s ease-out",this.roller.style.webkitTransition="all 0.001s ease-out",document.addEventListener("mousemove",this.boundTo(this.onMouseMove)),document.addEventListener("mouseup",this.boundTo(this.onMouseUp)),a.stopPropagation()},Roller.prototype.onMouseUp=function(a){if(0==this.deslc){var b=this.rollerContainer.getBoundingClientRect();this.deslc=-(this.initialY-b.top-(this.factor+2*this.padding)*this.visible/2),this.sentido=this.deslc>0?1:-1,this.vel=.06*this.sentido}this.actualTop+=this.deslc,this.endMove(),document.removeEventListener("mousemove",this.boundTo(this.onMouseMove)),document.removeEventListener("mouseup",this.boundTo(this.onMouseUp))},Roller.prototype.onMouseMove=function(a){if(this.actualTop+(a.clientY-this.initialY)<(this.factor+2*this.padding)*Math.ceil(this.visible/2)&&this.actualTop+(a.clientY-this.initialY)>(this.roller.clientHeight-(this.factor+2*this.padding)*Math.floor(this.visible/2))*-1){var b=a.clientY,c=new Date,d=c.getTime();this.lastmousetime&&this.lastmousetime!=d&&(this.vel=(b-this.lastmousey)/(d-this.lastmousetime),this.sentido=this.vel>0?1:-1),this.lastmousey=b,this.lastmousetime=d,this.roller.style.transition="all 0s ease-out",this.roller.style.webkitTransition="all 0s ease-out",this.roller.style.webkitTransform="translate3d(0px, "+(this.actualTop+a.clientY-this.initialY)+"px, 0px)",this.deslc=a.clientY-this.initialY}a.stopPropagation()},Roller.prototype.endMove=function(){var a=500;this.actualTop>(this.factor+2*this.padding)*Math.floor(this.visible/2)?(this.sentido=-1,this.vel=-.06):this.actualTop<(this.roller.clientHeight-(this.factor+2*this.padding)*Math.ceil(this.visible/2))*-1&&(this.sentido=1,this.vel=.06),a=Math.abs(this.vel/this.ac),this.actualTop=this.actualTop+this.ac*this.sentido*(a*a)/2;var b=1;b=Math.round(this.actualTop/(this.factor+2*this.padding)),b=(b-3)*-1,b<1&&(b=1),b>this.configuration.values.length&&(b=this.configuration.values.length),this.selectedIndex=b-1,this.actualTop=(b*-1+3)*(this.factor+2*this.padding),this.roller.style.transition="all "+a+"ms ease-out",this.roller.style.webkitTransition="all "+a+"ms ease-out",this.roller.style.webkitTransform="translate3d(0px, "+this.actualTop+"px, 0px)",this.clearSelected()},function(){function a(a,b){return function(){a.apply(b,arguments)}}function b(b){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof b)throw new TypeError("not a function");this._state=null,this._value=null,this._deferreds=[],h(b,a(d,this),a(e,this))}function c(a){var b=this;return null===this._state?void this._deferreds.push(a):void i(function(){var c=b._state?a.onFulfilled:a.onRejected;if(null===c)return void(b._state?a.resolve:a.reject)(b._value);var d;try{d=c(b._value)}catch(e){return void a.reject(e)}a.resolve(d)})}function d(b){try{if(b===this)throw new TypeError("A promise cannot be resolved with itself.");if(b&&("object"==typeof b||"function"==typeof b)){var c=b.then;if("function"==typeof c)return void h(a(c,b),a(d,this),a(e,this))}this._state=!0,this._value=b,f.call(this)}catch(g){e.call(this,g)}}function e(a){this._state=!1,this._value=a,f.call(this)}function f(){for(var a=0,b=this._deferreds.length;a<b;a++)c.call(this,this._deferreds[a]);this._deferreds=null}function g(a,b,c,d){this.onFulfilled="function"==typeof a?a:null,this.onRejected="function"==typeof b?b:null,this.resolve=c,this.reject=d}function h(a,b,c){var d=!1;try{a(function(a){d||(d=!0,b(a))},function(a){d||(d=!0,c(a))})}catch(e){if(d)return;d=!0,c(e)}}root=window;var i=b.immediateFn||root.setImmediate||function(a){setTimeout(a,1)},j=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)};b.prototype["catch"]=function(a){return this.then(null,a)},b.prototype.then=function(a,d){var e=this;return new b(function(b,f){c.call(e,new g(a,d,b,f))})},b.all=function(){var a=Array.prototype.slice.call(1===arguments.length&&j(arguments[0])?arguments[0]:arguments);return new b(function(b,c){function d(f,g){try{if(g&&("object"==typeof g||"function"==typeof g)){var h=g.then;if("function"==typeof h)return void h.call(g,function(a){d(f,a)},c)}a[f]=g,0===--e&&b(a)}catch(i){c(i)}}if(0===a.length)return b([]);for(var e=a.length,f=0;f<a.length;f++)d(f,a[f])})},b.resolve=function(a){return a&&"object"==typeof a&&a.constructor===b?a:new b(function(b){b(a)})},b.reject=function(a){return new b(function(b,c){c(a)})},b.race=function(a){return new b(function(b,c){for(var d=0,e=a.length;d<e;d++)a[d].then(b,c)})},root.Promise=b}(),function(a,b){function c(a){return a||this.timeout||this.requestTimeout}function d(a){return a||this.delay||this.requestDelay}function e(a){return a||this.then}var f,g,h,i,j,k;j={url:"http://terminal.ingenico.com/service",waasUrl:"http://terminal.ingenico.com"},i={parse:function(a){var b,c=[];for(b in a)a.hasOwnProperty(b)&&c.push(b+"="+a[b]);return encodeURI(c.join("&"))},ajax:function(a,b,c,d,e,f,g,h){var i=new XMLHttpRequest;i.open(a,b,g),"POST"!==a&&"PUT"!==a||(c=c&&("string"==typeof c?c:JSON.stringify(c))),i.onreadystatechange=function(){function a(){e&&e({msg:i.statusText||"XMLHttpRequest error status "+i.status,status:i.status,response:c})}function b(){d&&d(c)}var c;if(4===i.readyState)if(i.onreadystatechange=null,200===i.status||204===i.status){if(c=i&&i.responseText?JSON.parse(i.responseText):null,h&&"function"==typeof h)return void(h(c)?b():a());c&&c["return"]?a():b()}else a()},f&&(i.timeout=f),i.setRequestHeader("Content-type","application/x-www-form-urlencoded"),i.send(c)},post:function(a,b,c,d,e,f){this.ajax("POST",a,b,c,d,e,!0,f)},get:function(a,b,c,d){this.ajax("GET",a,null,b,c,d,!0)},del:function(a,b,c,d,e,f){this.ajax("DELETE",a,b,c,d,e,f)},put:function(a,b,c,d,e){this.ajax("PUT",a,b,c,d,e,!0)}},g=[],h={},k=null;var l=function(b){var c,d,e,h,k,l;return b=b||{},d={},l=!1,e=b.service,h=b.namespace,k=b.formats,c={serviceName:e,connected:!1,promise:null,evtSource:null,handler:{resolve:null,reject:null,promise:null},requestDelay:b.requestDelay||f.requestDelay,requestTimeout:b.requestTimeout||f.requestTimeout,connect:function(a){return a=a||{},a.then=a.then||"both",this.doPromise(a,function(a,b,d){if(c.connected)return console.info("Already connected"),a();var f=function(b){return c.connected=!0,a(b)},g="";for(format in k)g+="format_"+(h||"")+"."+format+"="+k[format]+"&";return i.get(j.url+"/"+e+"?"+g,f,b,d)}),this},disconnect:function(a){return a=a||{},a.then=a.then||"both",this.doPromise(a,function(b,d,f){if(c.connected){var g=function(a){return c.connected=!1,b(a)};return i.del(j.url+"/"+e,{},g,d,f,a.async!==!1)}return console.info("Not connected"),b()}),this},call:function(a,b){return b=b||{},b.then=b.then||"resolved",this.doPromise(b,function(d,g,k){if(c.connected){var m=(h?h+".":"")+a+"Request",n=(h?h+".":"")+a+"Response",o=b.data||{};b.hide&&(l=!0);var p=function(a){return l&&(l=!1,f.show()),d(a)},q=function(a){return l&&(l=!1,f.show()),g(a)};return i.post(j.url+"/"+e+"?request="+m+"&response="+n,o,p,q,k,b.expect)}return g({msg:"Not connected call"})}),this},doPromise:function(a,b){return f.doPromise.apply(this,[a,b])},reset:function(){return f.reset.call(this)},then:function(a,b){return f.then.call(this,a,b)},"catch":function(a){return f.then.call(this,null,a)},success:function(a){return f.then.call(this,a,null)},error:function(a){return f.then.call(this,null,a)},resolve:function(a){return f.resolve.call(this,a,c.handler)},reject:function(a){return f.reject.call(this,a,c.handler)},on:function(a,e,f){return a&&!a.match(/\./)&&"message"!==a&&(a=(h?h+".":"")+a),b=b||{},b.then=b.then||"resolved",this.doPromise(b,function(b,g,h){return c.evtSource?(f=f||c,d[a]={eventName:a,callback:e,context:f},c.evtSource.addEventListener(a,function(b){var c=JSON.parse(b.data);d[a].callback.call(f,c)},!1),b()):g()}),this},open:function(b){return b=b||{},b.then=b.then||"resolved",this.doPromise(b,function(b,d,f){return c.connected&&!c.evtSource?(c.evtSource=new a.EventSource(j.url+"/"+e+"/sse"),c.evtSource.onerror=function(a){return d(a)},c.evtSource.onopen=function(a){return b(a)},b()):d({msg:"Not connected or event already opened"})}),this},close:function(a){return a=a||{},a.then=a.then||"resolved",c.evtSource?(this.doPromise(a,function(a,b,d){return c.evtSource?(c.off(),c.evtSource.close(),c.evtSource=null,a()):b({msg:"Event source not exist"})}),this):this},off:function(a,b,e){function f(a){c.evtSource.removeEventListener(a,b||d[a].callback,!1),delete d[a]}if(a&&!a.match(/\./)&&"message"!==a&&(a=(h?h+".":"")+a),!c.evtSource)return this;if(a)if("string"==typeof a)f(a);else if("object"==typeof a&&a instanceof Array)for(var g=0,i=a.length;g<i;g++){var j;j=a[g],f(j)}else for(var k in d){var j;j=d[k].eventName,j.match(a)&&f(j)}else for(var k in d){var j;j=d[k].eventName,f(j)}return this},destroy:function(){var a;this.disconnect().close({success:this.reset}),a=g.indexOf(this),g.splice(a,1)}}};f={version:"1.4.1",requestDelay:0,requestTimeout:0,handler:{resolve:null,reject:null,promise:null},setup:function(a,b){function c(a){a.requestDelay=f.requestDelay,a.requestTimeout=f.requestTimeout}var d="http://terminal.ingenico.com/setup";if(b&&"function"==typeof b){console.warn("Deprecated since 1.1.0");var e;"function"==typeof a?i.get(d,function(b){return c(b),a(b)}):"object"==typeof a&&(e=JSON.parse(JSON.stringify(a)),f.requestDelay=e.requestDelay||f.requestDelay,f.requestTimeout=e.requestTimeout||f.requestTimeout,delete e.requestDelay,delete e.requestTimeout,i.post(d,e,b))}else if(a=a||{},a.then=a.then||"both",a&&a.data){var g=JSON.parse(JSON.stringify(a.data));f.requestDelay=a.data.requestDelay||f.requestDelay,f.requestTimeout=a.data.requestTimeout||f.requestTimeout,delete g.requestDelay,delete g.requestTimeout,this.doPromise(a,function(a,b,c){return i.post(d,g,a,b,c)})}else this.doPromise(a,function(a,b,c){return i.get(d,a,b,c)});return this},service:function(a){var b;return a.service?(b=new l(a),g.push(b),b):new Error(".service property is missing")},disconnect:function(){for(var a=0,b=g.length;a<b;a++){var c;c=g[a],c.connected&&i.del(j.url+"/"+c.serviceName,{},function(){},function(){},c.requestTimeout,!1)}return this},destroy:function(){for(var a=0,b=g.length;a<b;a++){var c;c=g[a],c.destroy()}return this},lookup:function(a,b){if(b&&"function"==typeof b)console.warn("Deprecated since 1.1.0"),a&&i.get(j.url+"?interface="+a,b);else{var c=b||{};c.then=c.then||"both",this.doPromise(c,function(b,c,d){return i.get(j.url+"?interface="+a,b,c,d)})}return this},hide:function(){console.log("INGENICO:WCE:hide")},show:function(){console.log("INGENICO:WCE:show")},hideWP:function(){console.log("INGENICO:WCE:hideWP")},showWP:function(){console.log("INGENICO:WCE:showWP")},weblet:{hide:function(){return console.log("INGENICO:WEBLET:hide"),this},show:function(){return console.log("INGENICO:WEBLET:show"),this},notify:function(a){a=a||{};var b=a.badge||"default",c=a.count||0,d=a.save||!1,e=a.id?":"+a.id:"";return console.log("INGENICO:NOTIFY:"+b+":"+c+":"+d+e),this},on:function(b,c,d){return"wakeup"===b&&f.createWakeupEvent(),d=d||this,h[b]={eventName:b,callback:c.bind(d),context:d},a.addEventListener(b,h[b].callback,!1),this},trigger:function(b,c){function d(b){var d;d=new CustomEvent(b,c),a.dispatchEvent(d)}if(c=c||{},b)if("string"==typeof b)d(b);else if("object"==typeof b&&b instanceof Array)for(var e=0,f=b.length;e<f;e++)d(b[e]);else for(var g in h){var i;i=h[g].eventName,i.match(b)&&d(i)}else for(var g in h){var i;i=h[g].eventName,d(i)}return this},off:function(b,c,d){function e(b){a.removeEventListener(b,c||h[b].callback,!1),delete h[b]}if(b)if("string"==typeof b)e(b);else if("object"==typeof b&&b instanceof Array)for(var f=0,g=b.length;f<g;f++)e(b[f]);else for(var i in h){var j;j=h[i].eventName,j.match(b)&&e(j)}else for(var i in h){var j;j=h[i].eventName,e(j)}return this}},waas:function(b){function c(){var c=function(a){this.sendResponse=function(c,d,e,f,g){return i.post(j.waasUrl+"/waas/"+b+"/"+a,c||{},d,e,f,g),this}};return{sendEvent:function(a,b,c,d,e,f){return i.post(j.waasUrl+"/waas/"+a,b||{},c,d,e,f),this},on:function(a,b,c){return b&&"function"==typeof b&&(c=b,b={}),f.push({eventName:a,properties:b,callBack:c}),this},start:function(){var d;d="?";for(var g=0,h=f.length;g<h;g++){var i=f[g],k=i.properties,l=i.eventName;if(k.perms&&"object"==typeof k.perms&&k.perms instanceof Array&&(d+="perms_"+l+"="+k.perms.toString()+"&"),k.formats){var m=b.split(".");m=m[0]+"."+m[1];var n=l[0].toUpperCase()+l.slice(1);for(format in k.formats)d+="format_"+m+"."+n+format+"="+k.formats[format]+"&"}}e=new a.EventSource(j.waasUrl+"/waas/"+b+d);for(var g=0,h=f.length;g<h;g++){var i=f[g],o=new c(i.eventName);e.addEventListener(i.eventName,i.callBack.bind(o),!1)}return this}}}var d,e,f;return f=[],d=new c(b)},doPromise:function(b,f){function g(){var e;return e=new a.Promise(function(g,i){a.setTimeout(function(){return f(function(a){h.handler.resolve=g,h.handler.reject=i,h.handler.promise=e,h.resolve(a,h.handler)},function(a){h.handler.resolve=g,h.handler.reject=i,h.handler.promise=e,h.reject(a,h.handler)},c.call(h,b.requestTimeout))},d.call(h,b.requestDelay))})}var h=this;if(!this.promise||b.promise)this.promise=g();else{var i=e.call(h,b.then);"resolved"===i?h.success(g):"rejected"===i?h.error(g):h.then(g,g)}return(b.error||b.success)&&h.then(b.success,b.error),this},then:function(a,b){var c=this;return a&&!b?c.promise=c.promise.then(function(b){return a.call(c,b,c.handler)}):a&&b?c.promise=c.promise.then(function(b){return a.call(c,b,c.handler)},function(a){return b.call(c,a,c.handler)}):c.promise=c.promise["catch"](function(a){return b.call(c,a,c.handler)}),this},"catch":function(a){return this.then(null,a),this},success:function(a){return this.then(a,null),this},error:function(a){return this.then(null,a),this},resolve:function(a){return this.handler.resolve.call(this,a,this.handler),this},reject:function(a){return this.handler.reject.call(this,a,this.handler),this},reset:function(){return this.promise=null,this},checkServices:function(a,b){function c(){g.shift(),i=0,e()}function d(){i++,setTimeout(e,b.delay)}function e(){g.length&&i<b["try"]?f.reset().lookup(g[0],{expect:function(a){return a&&a.length}}).then(c,d):i===b["try"]?k(g[0]):j()}var g,h,i,j,k;return b=b||{},b.delay=b.delay||1e3,b["try"]=b["try"]||20,b.then=b.then||"both",h=this,i=0,g=a.slice(0),h.doPromise({},function(a,b){j=a,k=b,e()})}},b.addEventListener("visibilitychange",function(){b.hidden?f.weblet.trigger("hide"):f.weblet.trigger("show")}),a.addEventListener("beforeunload",function(a){a.preventDefault(),f.weblet.trigger("close"),f.disconnect()}),f.createWakeupEvent=function(){return f.service({service:"local.desktopenv.inactivityHandler",namespace:"ingenico.desktopenv"}).reset().disconnect().close().connect().open().on("WakeupEvent",function(a){f.weblet.trigger("wakeup",a.cause)})},"undefined"!=typeof module&&module.exports?module.exports=f:"function"==typeof a.define&&a.define.amd?a.define("tetra",[],function(){return a.tetra=f,f}):a.tetra=f}(window,document),function(a){"use strict";a.app=a.app||{},a.app.view={},a.app.mod={};var b=a.app;b.Router=Backbone.Router.extend({routes:{"":"main","*actions":"goToPage"},main:function(){b.slider.show(new b.mod.home.View)},goToPage:function(a){var c=b.mod[a];c?b.slider.show(new c.View):b.mediator.fire("modal",[' The module "'+a+'" does not exists'])}})}(window),function(a){"use strict";a.data={}}(window),function(a){"use strict";a.app=a.app||{};var b=navigator.language,c={labelList:[],translationList:[{key:"KEY_CURRENCY_SYMBOL",pt:"R$",en:"$"},{key:"KEY_CURRENCY_CODE",pt:986,en:840},{key:"KEY_CURRENCY_MINOR_UNIT",pt:2,en:2},{key:"KEY_CURRENCY_SEPARATOR",pt:",",en:"."},{key:"KEY_CURRENCY_SEPARATOR_THOUSAND",pt:"",en:","},{key:"KEY_CURRENCY",pt:"BRL",en:"USD"},{key:"KEY_CURRENCY_DIRECTION",pt:"ltr",en:"rtl"},{key:"KEY_CURRENCY_POSITION",pt:"CURRENCY_BEFORE_AMOUNT",en:"AMOUNT_BEFORE_CURRENCY"},{key:"KEY_HOME_TTL",pt:"Sua localização",en:"Your location"},{key:"KEY_CHOOSE_OTHER",pt:"Escolha outra",en:"Choose other"},{key:"KEY_USE_CURRENT",pt:"Use essa",en:"Use this"},{key:"KEY_LOCATION",pt:"localização",en:"location"},{key:"KEY_LOADING",pt:"Carregando...",en:"Loading..."},{key:"KEY_SEARCH_LOCATION_TTL",pt:"Procurar Localização",en:"Search Location"},{key:"KEY_TEXT_SEARCH_LOCATION",pt:"Insira o endereço",en:"Insert address"},{key:"KEY_CONFIRM",pt:"Confirmar",en:"Confirm"},{key:"KEY_SEARCH_DESTINATION_TTL",pt:"Procurar Destino",en:"Search Destination"},{key:"KEY_TEXT_DESTINATION",pt:"Insira o endereço destino",en:"Insert destination address"},{key:"KEY_SEARCH",pt:"Procurar",en:"Search"},{key:"KEY_ROUTE",pt:"rota",en:"route"},{key:"KEY_SEARCHING_TTL",pt:"Procurando Rota",en:"Searching Route"},{key:"KEY_TEXT_SEARCHING",pt:"Procurando...",en:"Searching..."},{key:"KEY_CHECK_LOCATION_TTL",pt:"Verificar Localização",en:"Check Location"},{key:"KEY_ADDRESSES",pt:"endereços",en:"addresses"},{key:"KEY_CONFIRM_INFORMARION_TTL",pt:"Confirmar informações",en:"Confirm ride information"},{key:"KEY_REQUEST_TAXI",pt:"Pedir taxi",en:"Request taxi"},{key:"KEY_AND_PAY",pt:"e pagar",en:"and pay"},{key:"KEY_INITIAL_LOCATION",pt:"Local de partida",en:"Initial location"},{key:"KEY_DESTINATION",pt:"Destino",en:"Destination"},{key:"KEY_FARE",pt:"Tarifa",en:"Fare"},{key:"KEY_DERATTURE_TIME",pt:"Hora de partida",en:"Departure time"},{key:"KEY_RECEIPT_TTL",pt:"Recibo",en:"Receipt"},{key:"KEY_PRINT",pt:"Imprimir",en:"Print"},{key:"KEY_SKIP",pt:"Pular",en:"Skip"},{key:"KEY_RECEIPT",pt:"recibo",en:"receipt"},{key:"KEY_RESERVATION_NUMBER",pt:"Número da reserva",en:"Reservation number"},{key:"KEY_ENJOY_YOUR_RIDE",pt:"Aproveite sua corrida",en:"Enjoy your ride"},{key:"KEY_NOT_FOUND",pt:"Destino ou Origem Não Encontrado.",en:"Destination or Origin Not Found."},{key:"KEY_INVALID_DESTINATION",pt:"Destino inválido. Não deve ser igual ao local de origem.",en:"Invalid destination. It must not be equal to origin location."},{key:"KEY_EMPTY_DESTINATION",pt:"Destino inválido. Não deve estar em branco.",en:"Invalid destination. It must not be blank."},{key:"KEY_TRANSACTION_ERROR",pt:"A transação falhou, por favor tente novamente.",en:"Transaction failed, please try again",fr:"La transaction a échoué, s'il vous plaît essayez à nouveau"},{key:"KEY_ZERO_RESULTS",pt:"Não há rotas entre estes dois locais.",en:"There is no route between those places."}],load:function(a){var b=0;for(b=0;b<this.translationList.length;b+=1)this.labelList[this.translationList[b].key]=this.translationList[b][a]||this.translationList[b][a.substr(0,2)]||this.translationList[b].en}};a.app.strings=c,a.app.strings.load(b)}(window),function(a){"use strict";var b={},c={on:function(a,c,d){b[a]||(b[a]=[]),b[a].push({callback:c,scope:d})},un:function(a,c){var d,e,f=b[a];if(f)for(e=f.length,d=e-1;d>=0;d-=1)f[d].callback===c&&f.splice(d,1)},fire:function(a,c){var d,e,f=b[a];if(f)for(e=f.length,d=0;d<e;d+=1)f[d].callback.apply(f[d].scope||null,c||[])}};a.app=a.app||{},a.app.mediator=c}(window),function(a){"use strict";var b={config:{appName:"11_taxi_reservation",version:"2.0.0"}};a.app=a.app||{},a.app.appParameters=b}(window),function(a){"use strict";var b={applyDecimalSeparator:function(a,b){var c,d,e;return a=parseInt(a,10),a=0===a?"000":a.toString(),c=a.length,d=a.substr(c-2,2),e=a.substr(0,c-2),""===e&&(e="0"),1===d.length&&(d="0"+d),e+b+d},fixMoneyCurrency:function(b){var c=this.applyDecimalSeparator(b,a.app.strings.labelList.KEY_CURRENCY_SEPARATOR);return"rtl"===a.app.strings.labelList.KEY_CURRENCY_DIRECTION?c+" "+a.app.strings.labelList.KEY_CURRENCY_SYMBOL:a.app.strings.labelList.KEY_CURRENCY_SYMBOL+" "+c},applyDateMask:function(b){function c(a){return isNaN(a)||1!==a.toString().length?a:"0"+a}var d,e,f,g,h=a.app.strings.labelList.KEY_DATE_MASK;return isNaN(b)?(d=parseInt(b.substr(0,2),10),e=parseInt(b.substr(3,2),10),f=b.substr(6,4)):(g=new Date(parseInt(b,10)),d=g.getDate(),e=g.getMonth()+1,f=g.getFullYear()),h=h.replace("%d",c(d.toString())),h=h.replace("%j",d),h=h.replace("%m",c(e.toString())),h=h.replace("%M",a.app.strings.labelList.KEY_DATE_MONTHS[e-1].substr(0,3)),h=h.replace("%n",e),h=h.replace("%F",a.app.strings.labelList.KEY_DATE_MONTHS[e-1]),h=h.replace("%Y",f),h=h.replace("%y",f.toString().substr(2,2))},applyLabels:function(b){$(".translatable",b).each(function(){var b=$(this),c=b.text().trim();a.app.strings.labelList[c]&&b.text(a.app.strings.labelList[c]),b.removeClass("translatable")}),$(".moneyValue",b).each(function(){var a=$(this),b=a.text().trim();a.text(app.stringtable.fixMoneyCurrency(b)),a.removeClass("moneyValue")}),$(".dateValue",b).each(function(){var a=$(this),b=a.text();a.text(app.stringtable.applyDateMask(b)),a.removeClass("dateValue")})}};a.app.stringtable=b}(window),function(a){"use strict";var b={timeout:null,chipService:tetra.service({service:"local.device.chip0",namespace:"ingenico.device.chip"}),loyaltyService:tetra.service({service:"local.loyalty.engine",namespace:"ingenico.demo"}),transacService:tetra.service({service:"local.transaction.engine",namespace:"ingenico.transaction"}),contactLessService:tetra.service({service:"local.device.contactless0",namespace:"ingenico.device.contactless"}),doTransaction:function(b,c,d){var e=this;e.transacService.reset().disconnect().connect().close().open().call("ManageTransaction",{hide:!0,data:{transaction:{currency:{code:a.app.strings.labelList.KEY_CURRENCY,numCode:a.app.strings.labelList.KEY_CURRENCY_CODE,minorUnit:a.app.strings.labelList.KEY_CURRENCY_MINOR_UNIT,minorUnitSeparator:a.app.strings.labelList.KEY_CURRENCY_SEPARATOR,thousandSeparator:a.app.strings.labelList.KEY_CURRENCY_SEPARATOR_THOUSAND,position:a.app.strings.labelList.KEY_CURRENCY_POSITION,symbol:a.app.strings.labelList.KEY_CURRENCY_SYMBOL},value:b,transactionType:"Payment"},mean:"CHIP_CARD"}}).success(function(){c&&"function"==typeof c&&c(!0)}).error(function(){c&&"function"==typeof c&&(d&&"function"==typeof d?d():c(!1))}).disconnect()},startDetectChip:function(a){var b=this;b.chipService.reset().disconnect().connect().close().open().on("ChipDetectedEvent",function(){b.stopDetectChip(),a&&"function"==typeof a&&a()}).call("Start",{data:{timeout:1e4}}),b.timeout=setTimeout(function(){b.startDetectChip()},1e4)},stopDetectChip:function(){clearTimeout(this.timeout),this.timeout=void 0,this.chipService.reset().connect().call("Stop").disconnect(),this.chipService.off()},isCardPresent:function(a){this.chipService.reset().disconnect().connect().close().open().call("IsCardPresent").success(function(b){a&&"function"==typeof a&&a(1===b.chipPresent)})},readLoyaltyCard:function(a,b){this.loyaltyService.reset().connect().call("ReadInfo").success(function(b){a&&"function"==typeof a&&a(!0,b)}).error(function(){a&&"function"==typeof a&&(b&&"function"==typeof b?b():a(!1))}).disconnect()},startDetectNFC:function(a,b){var c=this;c.contactLessService.reset().disconnect().connect().close().open().on("ClessDetectedEvent",function(){var b=null;c.stopDetectNFC(),a&&"function"==typeof a&&(b={voucherID:2010,status:!0,value:1e3,voucherValue:1e3,used:!1
},a(b))}).call("StartDetection",{data:{timeout:5e3}}).then(void 0,b),c.timeout=setTimeout(function(){c.startDetectNFC()},5e3)},stopDetectNFC:function(){clearTimeout(this.timeout),this.timeout=void 0,this.contactLessService.reset().connect().call("Stop").disconnect(),this.contactLessService.off()},waitPaymentBySmartphone:function(a){setTimeout(a,3e3)}};a.app=a.app||{},a.app.pos=b}(window),function(a){"use strict";var b={request:function(a,b){$.ajax({type:"GET",url:a,success:function(a){return b&&"function"==typeof b&&b(a),a},error:function(a,c,d){return b&&"function"==typeof b&&b({status:"ERROR_INTERNAL_"+a.status+": "+c+", "+d}),c}})},pointLocation:function(b,c,d,e){var f="point_location";a.consts.maphost&&(f=a.consts.maphost+"/"+f+"/"),this.request(f+"?address="+encodeURIComponent(b)+"&language="+encodeURIComponent(c)+"&size="+d,e)},traceRoute:function(b,c,d,e,f,g){var h="trace_route";a.consts.maphost&&(h=a.consts.maphost+"/"+h+"/"),this.request(h+"?start="+encodeURIComponent(b)+"&destination="+encodeURIComponent(c)+"&trajectory="+encodeURIComponent(d)+"&language="+encodeURIComponent(e)+"&size="+f,g)},getDirections:function(b,c,d,e){var f="get_directions";a.consts.maphost&&(f=a.consts.maphost+"/"+f+"/"),this.request(f+"?from="+encodeURIComponent(b)+"&to="+encodeURIComponent(c)+"&language="+encodeURIComponent(d),e)},getAddress:function(b,c,d){var e="get_address";a.consts.maphost&&(e=a.consts.maphost+"/"+e+"/"),this.request(e+"?address="+encodeURIComponent(b)+"&language="+encodeURIComponent(c),d)}};a.app=a.app||{},a.app.client=b}(window),function(a){"use strict";var b={load:function(b){b&&"string"==typeof b&&""!==b&&("#"===b[0]?a.location.href=b:a.location.href="#"+b)},replace:function(b){b&&"string"==typeof b&&""!==b&&("#"===b[0]?a.location.replace(b):a.location.replace("#"+b))},print:function(){a.print()}};a.app=a.app||{},a.app.core=b}(window),this.JST=this.JST||{},this.JST["src/app/templates/check_location.tpl"]=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+='<div class="map-location">\r\n    <img id="map">\r\n</div>';return __p},this.JST["src/app/templates/confirm_information.tpl"]=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+='<div class="initial_location">\r\n    <label class="strong translatable">KEY_INITIAL_LOCATION</label>\r\n    <label>'+(null==(__t=actual)?"":__t)+'</label>\r\n</div>\r\n<div class="destination">\r\n    <label class="strong translatable">KEY_DESTINATION</label>\r\n    <label>'+(null==(__t=destination)?"":__t)+'</%></label>\r\n</div>\r\n<div class="fare">\r\n    <label class="strong translatable">KEY_FARE</label>\r\n    <label class="moneyValue">'+(null==(__t=value)?"":__t)+'</label>\r\n</div>\r\n<div class="departure_time">\r\n    <label class="strong translatable">KEY_DERATTURE_TIME</label>\r\n    <label id="timeChooser" ></label>\r\n    <span class="clock"></span>\r\n</div>';return __p},this.JST["src/app/templates/home.tpl"]=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+='<!--\r\n<span class="pin-home"></span>\r\n-->\r\n<span class="field-pin-home"></span>\r\n<label class="location marginTop">'+(null==(__t=address)?"":__t)+'</label>\r\n<img id="map">';return __p},this.JST["src/app/templates/location_item.tpl"]=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+='<li class="location-item">\r\n    <label class="location-address">'+(null==(__t=address)?"":__t)+"</label>\r\n</li>";return __p},this.JST["src/app/templates/receipt.tpl"]=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+='<div class="logo_and_reservation">\r\n    <img class="receipt_logo" src="img/receipt-taxilogo.png">\r\n    <div class="reservation">\r\n        <p class="strong translatable">KEY_RESERVATION_NUMBER</p>\r\n        <p class="reservation_number">'+(null==(__t=reservationNumber)?"":__t)+'</p>\r\n\r\n        <div class="fare">\r\n            <label class="strong translatable">KEY_DERATTURE_TIME</label>\r\n            <label>'+(null==(__t=time)?"":__t)+'</label>\r\n        </div>\r\n    </div>\r\n</div>\r\n<div class="initial_location">\r\n    <label class="strong translatable">KEY_INITIAL_LOCATION</label>\r\n    <label>'+(null==(__t=actual)?"":__t)+'</label>\r\n</div>\r\n<div class="destination">\r\n    <label class="strong translatable">KEY_DESTINATION</label>\r\n    <label>'+(null==(__t=destination)?"":__t)+'</%></label>\r\n</div>\r\n<div class="fare">\r\n    <label class="strong translatable">KEY_FARE</label>\r\n    <label class="moneyValue">'+(null==(__t=value)?"":__t)+'</label>\r\n</div>\r\n<p class="enjoy_message translatable">KEY_ENJOY_YOUR_RIDE</div>';return __p},this.JST["src/app/templates/search_location.tpl"]=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+='<div class="input">\r\n    <span class="img-search"></span>\r\n    <input id="textSearch" type="text" placeholder="" />\r\n</div>\r\n<ul class="location-container" ></ul>';return __p},this.JST["src/app/templates/searching.tpl"]=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+='<div class="searching translatable">KEY_TEXT_SEARCHING</div>';return __p},function(){"use strict";app.view.Footer=Backbone.View.extend({button1Info:{callback:null,nextPage:null},button2Info:{callback:null,nextPage:null},initialize:function(){app.mediator.on("viewchangefooter",this.onViewChange,this)},onViewChange:function(a,b,c){var d,e,f,g,h,i,j,k,l=$(this.$el[0]);a?(this.button1Info=c,this.button2Info=b,d=$(".btn1",this.$el[0]),e=$(".btn2",this.$el[0]),i=$("label",e),j=$("label",e),k=$("label",e),d.removeClass("hide"),e.removeClass("hide"),null===c||void 0===c?(d.addClass("hide"),e.addClass("btnAlignCenter")):(g=$(".buttonText",d),f=$(".buttonLabel",d),g.text(app.strings.labelList[c.keyLabel]),f.text(app.strings.labelList[c.keySubLabel]),h=$(".footerIcon",d).removeClass(),h.addClass("footerIcon"),h.addClass(c.buttonIcon)),null===b||void 0===b?(e.addClass("hide"),$(".btn2",this.$el[0]).addClass("hide")):(i=$(".buttonText",e),j=$(".buttonLabel",e),i.text(app.strings.labelList[b.keyLabel]),j.text(app.strings.labelList[b.keySubLabel]),k=$(".footerIcon",e).removeClass(),k.addClass("footerIcon"),k.addClass(b.buttonIcon)),null!==c&&null!==b&&void 0!==c&&void 0!==b?(l.addClass("footerSplit"),l.removeClass("footerSolo")):(l.addClass("footerSolo"),l.removeClass("footerSplit")),l.removeClass("hide")):l.addClass("hide")},events:{"mouseup .btn1":"onButton","mouseup .btn2":"onButton"},onButton:function(a){var b,c=$(a.currentTarget);a.preventDefault(),c.hasClass("btn1")?b=this.button1Info:c.hasClass("btn2")&&(b=this.button2Info),null!==b.callback&&void 0!==b.callback&&b.callback(),null!==b.nextPage&&void 0!==b.nextPage&&(window.location.href=b.nextPage)}})}(),function(){"use strict";app.view.Header=Backbone.View.extend({backTo:null,initialize:function(){app.mediator.on("viewchangeheader",this.onViewChange,this)},events:{"mouseup .back":"goBack"},onViewChange:function(a,b){var c,d=$(".title",this.$el[0]),e=$(".back",this.$el[0]);c=app.strings.labelList[a],d.text(void 0!==c?c:a),b?e.removeClass("hide"):e.addClass("hide")},goBack:function(){history.back()}})}(),function(){"use strict";app.view.Slider=Backbone.View.extend({current:null,show:function(a){var b,c;b=this,b.current&&(b.current.destroy&&b.current.destroy(),b.current.undelegateEvents(),b.current.unbind(),b.current.remove(),b.current.$el[0]=null),a&&a.render&&(c=a.render(),app.stringtable.applyLabels(c),this.$el[0].appendChild(c)),b.current=a,setTimeout(function(){b.current.load&&b.current.load()},0)}})}(),function(){"use strict";app.mod.check_location=app.mod.check_location||{},app.mod.check_location.View=Backbone.View.extend({className:"check_location page",initialize:function(){app.mediator.fire("viewchangeheader",["KEY_CHECK_LOCATION_TTL",!0]),app.mediator.fire("viewchangefooter",[!0,{keyLabel:"KEY_CONFIRM",keySubLabel:"KEY_ADDRESSES",callback:null,nextPage:"#confirm_information",buttonIcon:"btn-checkicon"}])},render:function(){var a=this.$el,b="320x340";return this.$el.html(JST["src/app/templates/check_location.tpl"]()),"480px"===$("body").css("width")&&(b="480x183"),app.client.traceRoute(app.actualMarker,app.destinationMarker,app.traject,navigator.language,b,function(b){$("#map",a).prop("src","data:image/png;base64,"+b.image)}),this.$el[0]}})}(),function(){"use strict";app.mod.confirm_information=app.mod.confirm_information||{},app.mod.confirm_information.View=Backbone.View.extend({className:"confirm_information page",initialize:function(){app.mediator.fire("viewchangeheader",["KEY_CONFIRM_INFORMARION_TTL",!0]),app.mediator.fire("viewchangefooter",[!0,{keyLabel:"KEY_REQUEST_TAXI",keySubLabel:"KEY_AND_PAY",callback:function(){app.pos.doTransaction(app.value,function(a){a===!0?(app.time=$("#timeChooser").text().trim(),app.reservationNumber=Math.floor(1e7*Math.random()),app.core.load("#receipt")):app.mediator.fire("modal",[app.strings.labelList.KEY_TRANSACTION_ERROR,"alert-danger"])})},nextPage:null,buttonIcon:"btn-checkicon"}])},render:function(){return this.$el.html(JST["src/app/templates/confirm_information.tpl"]({destination:app.destinationAddress,actual:app.actualAddress,value:app.value})),this.$el[0]},load:function(){var a,b,c,d;a=new Date,b=a.getHours(),c=a.getMinutes(),d=b>=12?"PM":"AM",b%=12,b=b||12,c=c<10?"0"+c:c,b=b<10?"0"+b:b,$("#timeChooser").text(b+":"+c+" "+d),this.timepicker=new TimePick({target:"timeChooser"}),$(".clock").on("mouseup",function(){$("#timeChooser").click()})},destroy:function(){$(".clock").off(),this.timepicker.destroy()}})}(),function(){"use strict";app.mod.home=app.mod.home||{},app.mod.home.View=Backbone.View.extend({className:"home page",initialize:function(){app.mediator.fire("viewchangeheader",["KEY_HOME_TTL",!1]),app.mediator.fire("viewchangefooter",[!0,{keyLabel:"KEY_USE_CURRENT",keySubLabel:"KEY_LOCATION",callback:null,nextPage:"#search_destination",buttonIcon:"homeFooterBtn1"},{keyLabel:"KEY_CHOOSE_OTHER",keySubLabel:"KEY_LOCATION",callback:null,nextPage:"#search_location",buttonIcon:"homeFooterBtn2"}])},render:function(){var a="320x480",b=this.$el;return app.actualAddress=localStorage.getItem("actualAddress")||consts.initialLocation,this.$el.html(JST["src/app/templates/home.tpl"]({address:app.actualAddress})),void 0!==app.actualAddress&&void 0!==app.locationCache&&void 0!==app.locationCache[app.actualAddress]?$("#map",b).prop("src","data:image/png;base64,"+app.locationCache[app.actualAddress]):("480px"===$("body").css("width")&&(a="480x320"),app.client.pointLocation(app.actualAddress,navigator.language,a,function(a){"OK"!==a.status?app.mediator.fire("modal",[a.status,"alert-danger"]):($("#map",b).prop("src","data:image/png;base64,"+a.image),app.locationCache=app.locationCache||{},app.locationCache[app.actualAddress]=a.image)})),this.$el[0]},load:function(){app.destinationAddress="",$(".home").on("mouseup",".location",function(){window.location="#search_location"})},destroy:function(){$(".home").off()}})}(),function(){"use strict";app.mod.receipt=app.mod.receipt||{},app.mod.receipt.View=Backbone.View.extend({className:"receipt page",initialize:function(){var a=!1,b=this;app.mediator.fire("viewchangeheader",["KEY_RECEIPT_TTL",!1]),"480px"===$("body").css("width")&&(a=!0),app.mediator.fire("viewchangefooter",[!0,{keyLabel:"KEY_SKIP",keySubLabel:"KEY_RECEIPT",callback:null,nextPage:"#home",buttonIcon:"btn-checkicon"},a?null:{keyLabel:"KEY_PRINT",keySubLabel:"KEY_RECEIPT",callback:function(){b.undelegateEvents(),app.core.print(),b.delegateEvents()},nextPage:"#home",buttonIcon:"btn-checkicon"}])},render:function(){return this.$el.html(JST["src/app/templates/receipt.tpl"]({reservationNumber:app.reservationNumber,value:app.value,actual:app.actualAddress,destination:app.destinationAddress,time:app.time})),this.$el[0]}})}(),function(){"use strict";app.mod.search_destination=app.mod.search||{},app.mod.search_destination.View=Backbone.View.extend({className:"search_destination page",initialize:function(){app.mediator.fire("viewchangeheader",["KEY_SEARCH_DESTINATION_TTL",!0]),app.mediator.fire("viewchangefooter",[!0,{keyLabel:"KEY_SEARCH",keySubLabel:"KEY_ROUTE",callback:function(){var a=$(".location-item:first-child");a.length&&(app.destinationAddress=a.text().trim())},nextPage:"#searching",buttonIcon:"btn-searchicon"}])},render:function(){return this.$el.html(JST["src/app/templates/search_location.tpl"]()),$("#textSearch",this.$el[0]).attr("placeholder",app.strings.labelList.KEY_TEXT_DESTINATION),this.$el[0]},load:function(){$("#textSearch").focus(),app.destinationAddress="",$(".input").on("mouseup",function(){$("#textSearch").focus()}),$(".search_destination").on("mouseup",".location-item",function(){var a=$(".location-container"),b=$(this);a.empty(),a.html(b),$("#textSearch").val(b.text().trim())});var a=-1,b=!1,c=null,d=function(a){if("OK"!==a.status&&"ZERO_RESULTS"!==a.status)app.mediator.fire("modal",[a.status,"alert-danger"]);else{var d=$(".location-container");d.empty(),_.each(a.results,function(a){d.append(JST["src/app/templates/location_item.tpl"]({address:a.formatted_address}))})}c?(c(),c=null):b=!1};$("#textSearch").on("keyup",function(){var e=$(this);a!==e.val().length&&(a=e.val().length,b?c=function(){app.client.getAddress(e.val(),navigator.language,d)}:(b=!0,app.client.getAddress(e.val(),navigator.language,d)))})},destroy:function(){$("#textSearch").off(),$(".search_destination").off(),$(".input").off()}})}(),function(){"use strict";app.mod.search_location=app.mod.search||{},app.mod.search_location.View=Backbone.View.extend({className:"search_location page",initialize:function(){app.mediator.fire("viewchangeheader",["KEY_SEARCH_LOCATION_TTL",!0]),app.mediator.fire("viewchangefooter",[!0,{keyLabel:"KEY_CONFIRM",keySubLabel:"KEY_LOCATION",callback:function(){var a=$(".location-item:first-child");a.length&&localStorage.setItem("actualAddress",a.text().trim())},nextPage:"#home",buttonIcon:"btn-checkicon"}])},render:function(){return this.$el.html(JST["src/app/templates/search_location.tpl"]()),$("#textSearch",this.$el[0]).attr("placeholder",app.strings.labelList.KEY_TEXT_SEARCH_LOCATION),this.$el[0]},load:function(){$("#textSearch").focus(),$(".input").on("mouseup",function(){$("#textSearch").focus()}),$(".search_location").on("mouseup",".location-item",function(){var a=$(".location-container"),b=$(this);a.empty(),a.html(b),$("#textSearch").val(b.text().trim())});var a=-1,b=!1,c=null,d=function(a){if("OK"!==a.status&&"ZERO_RESULTS"!==a.status)app.mediator.fire("modal",[a.status,"alert-danger"]);else{var d=$(".location-container");d.empty(),_.each(a.results,function(a){d.append(JST["src/app/templates/location_item.tpl"]({address:a.formatted_address}))})}c?(c(),c=null):b=!1};$("#textSearch").on("keyup",function(){var e=$(this);a!==e.val().length&&(a=e.val().length,b?c=function(){app.client.getAddress(e.val(),navigator.language,d)}:(b=!0,app.client.getAddress(e.val(),navigator.language,d)))})},destroy:function(){$("#textSearch").off(),$(".search_location").off(),$(".input").off()}})}(),function(){"use strict";app.mod.searching=app.mod.search||{},app.mod.searching.View=Backbone.View.extend({className:"searching page",initialize:function(){app.mediator.fire("viewchangeheader",["KEY_SEARCHING_TTL",!1]),app.mediator.fire("viewchangefooter",[!1])},render:function(){return this.$el.html(JST["src/app/templates/searching.tpl"]()),this.$el[0]},load:function(){return app.actualAddress=app.actualAddress||consts.initialLocation,void 0===app.destinationAddress||""===app.destinationAddress.trim()?(app.mediator.fire("modal",[app.strings.labelList.KEY_EMPTY_DESTINATION,"alert-danger"]),void window.history.back()):app.actualAddress.trim()===app.destinationAddress.trim()?(app.mediator.fire("modal",[app.strings.labelList.KEY_INVALID_DESTINATION,"alert-danger"]),void window.history.back()):void app.client.getDirections(app.actualAddress,app.destinationAddress,navigator.language,function(a){var b=0;if("OK"===a.status){for(app.traject=a.route.overview_polyline.points,app.distance=0,app.actualMarker=a.route.legs[0].start_location.lat+","+a.route.legs[0].start_location.lng,b=0;b<a.route.legs.length;b++)app.distance+=a.route.legs[b].distance.value;app.destinationAddress=a.route.legs[a.route.legs.length-1].end_address,app.destinationMarker=a.route.legs[a.route.legs.length-1].end_location.lat+","+a.route.legs[a.route.legs.length-1].end_location.lng,app.value=parseInt(200+app.distance/1e3*138,10),app.core.replace("#check_location")}else"NOT_FOUND"===a.status?(app.mediator.fire("modal",[app.strings.labelList.KEY_NOT_FOUND,"alert-danger"]),window.history.back()):"ZERO_RESULTS"===a.status?(app.mediator.fire("modal",[app.strings.labelList.KEY_ZERO_RESULTS,"alert-danger"]),window.history.back()):(app.mediator.fire("modal",[a.status,"alert-danger"]),window.history.back())})}})}(),function(a){"use strict";var b,c,d={onModal:function(a,d){b||(b=document.createElement("div"),b.className="modal alert "+d,$("body")[0].appendChild(b)),b.textContent=a,setTimeout(function(){b.classList.add("active"),c&&clearTimeout(c),c=setTimeout(function(){b.parentNode.removeChild(b),b=null},2e3)},0)}};a.app.mediator.on("modal",d.onModal)}(window),function(a){"use strict";a.app.initializer={cache:function(){var b;a.app.image_cache=[],b=new Image,b.src="img/btn-bottom.png",a.app.image_cache.push(b),b=new Image,b.src="img/btn-bottomhover.png",a.app.image_cache.push(b),b=new Image,b.src="img/btn-bottom-other.png",a.app.image_cache.push(b),b=new Image,b.src="img/btn-bottomhover-other.png",a.app.image_cache.push(b),b=new Image,b.src="img/background.png",a.app.image_cache.push(b)},data:function(){},system:function(){a.app.view.header=new app.view.Header({el:".bar"}),a.app.view.footer=new app.view.Footer({el:".footer"}),a.app.slider=new app.view.Slider({el:".wrap"}),a.app.router=new app.Router,Backbone.history.start()}},a.tests||$(function(){a.app.initializer.cache(),a.app.initializer.data(),a.app.initializer.system()})}(window);